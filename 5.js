webpackJsonp([5,10],{101:function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},36:function(t,e,n){"use strict";function r(t,e){return new d(t,e)}Object.defineProperty(e,"__esModule",{value:!0});var o=n(8),i=(n.n(o),n(53));e.create=r;var a="interaction-logs",s=o.time.format("%Y-%m-%d %H:%M:%S.%L"),l=";",u="\n",c=5e5,d=function(){function t(t,e){this.options=e,this.parentDOM=e.parentDOM}return t.prototype.init=function(){return this.$node=o.select(this.parentDOM).append("button").attr("type","button").attr("id","submitLog").attr("class","btn btn-default btn-sm").style("margin-top","10px").style("display","block").text("Submit Log"),this.attachListener(),Promise.resolve(this)},t.prototype.attachListener=function(){this.$node.on("click",function(e){console.log("submit log");var r="log-"+n.i(i.a)(6)+".txt",o=localStorage.getItem(a);null===o?bootbox.alert("No log records available yet."):(n.i(i.b)(o,r,"text/plain"),t.trimLogFile())})},t.log=function(e,n){var r=s(new Date)+l+e+l+JSON.stringify(n);console.log("log preview: "+r),t.appendInStorage(r)},t.appendInStorage=function(t){var e=localStorage.getItem(a);e=null===e?t:e+u+t,localStorage.setItem(a,e)},t.trimLogFile=function(){var t=localStorage.getItem(a);if(null!==t&&t.length>c){var e=t.indexOf(u,t.length-c);t=t.slice(e),localStorage.setItem(a,t)}},t}();e.default=d},45:function(t,e,n){"use strict";function r(t,e){return new g(t,e)}Object.defineProperty(e,"__esModule",{value:!0});var o=n(11),i=n(8),a=(n.n(i),n(98)),s=(n.n(a),n(3)),l=(n.n(s),n(54)),u=(n.n(l),n(76)),c=(n.n(u),n(53)),d=n(12),f=n(55),h=n(36);e.create=r;var p=["sourceNode","targetNode","timeNode","valueNode","sourceTag","targetTag","attribute1","attribute2"],g=function(){function t(t,e){this.options=e,this.currentTab="URL",this.rowsToShow=10,this.$node=i.select(t).append("div").classed("dataImport",!0)}return t.prototype.init=function(){return"loaded"===localStorage.getItem("dataLoaded")?(i.select(".dataVizView").classed("invisibleClass",!1),i.select("#backBtn").classed("invisibleClass",!1),i.select(".dataLoadingView").classed("invisibleClass",!0)):(i.select(".dataVizView").classed("invisibleClass",!0),i.select("#backBtn").classed("invisibleClass",!0)),u.maxLogItems(10),this.build(),this.attachListener(),Promise.resolve(this)},t.prototype.build=function(){this.$fileContainer=this.$node.html("\n    <div class='fileContainer'>\n    \x3c!--<button type='button' id='specialBtn' class='btn btn-primary btn-lg'>Start Visualization</button>--\x3e\n    <div class='informationBoxes'>\n      <div class='netflowerFeature'>"+f.f+"</div>\n      <div class='disclaimer'>"+f.g+"</div>\n    </div>\n    <h3 id='informationText'>Load your data here:</h3>\n    <div style='width: 100%;'>\n    <div class='row'>\n      <div class='col-md-12'>\n              <div class='panel panel-primary'>\n                  <div class='panel-heading'>\n                      <h3 class='panel-title'>Choose between</h3>\n                      <span class='pull-right'>\n                          <ul class='nav panel-tabs'>\n                              <li class='active'><a href='#tab1' data-toggle='tab'><i class='fa fa-link'></i> URL</a></li>\n                              <li><a href='#tab2' data-toggle='tab'><i class='fa fa-file-excel-o'></i> File</a></li>\n                              <li><a href='#tab3' data-toggle='tab'><i class='fa fa-university'></i> Sample Data</a></li>\n                          </ul>\n                      </span>\n                  </div>\n                  <div class='panel-body'>\n                      <div class='tab-content'>\n                          <div class='tab-pane active' id='tab1'>\n                            <label for='fileByUrl'>Paste your URL (needs to be .csv):</label>\n                            <input type='text' class='form-control' id='fileByUrl'>\n                          </div>\n                          <div class='tab-pane' id='tab2'>\n                            <label for='filename'>Upload your FILE (needs to be .csv):</label>\n                            <div class='input-group'>\n                              <span class='input-group-btn' style='padding-right: 2px;'>\n                              <span class='btn btn-default btn-file csvInputText'>\n                                Select CSV file...\n                                <input type='file' id='files' accept='.csv' required />\n                              </span>\n                              </span>\n                              <input readonly='readonly' placeholder='CSV file'\n                                class='form-control' id='filename' type='text' />\n                            </div>\n                          </div>\n                          <div class='tab-pane' id='tab3'></div>\n                      </div>\n                      <div>\n                        <button type='submit' id='submitFile' class='btn btn-primary btn-lg pull-right'>Load & Show</button>\n                        <button type='button' id='showMoreBtn' class='btn btn-info pull-right'>View Data</button>\n                      </div>\n                  </div>\n          </div>\n      </div>\n    </div>\n    ");var t=this.$fileContainer.select("div#tab3").append("table").classed("downloadTable",!0).append("tbody");i.json("./static/samples.json",function(e,n){t.selectAll("tr").data(n).enter().append("tr").classed("selected",function(t,e){return 0===e}).html(function(t,e){return"\n      <td class='leftTD'>\n        <i class='radio fa fa-"+(0===e?"check-":"")+"circle-o'></i>\n        <strong>"+t.title+"</strong><br/>\n        "+t.description+"\n        "+(t.source.length>0?"<a target='_blank' href='"+t.source+"'>Source</a>":"")+"\n      </td>\n      <td class='rightTD'><a href="+t.file+'><i class="fa fa-download"></i> Download Data (.csv)</a></td>\n      '}).on("click",function(e){t.selectAll("tr").classed("selected",!1),t.selectAll("tr i.radio").classed("fa-check-circle-o",!1).classed("fa-circle-o",!0),i.select(this).classed("selected",!0),i.select(this).select("i.radio").classed("fa-check-circle-o",!0).classed("fa-circle-o",!1)})}),i.select(".fileContainer").append("div").classed("additionalInfo",!0),this.$displayContainer=i.select(".additionalInfo").html("\n        <div class='row'>\n          <div class='ctrlContainer'>\n            <h3 id='valueListName'></h3>\n            <div class='btnContainer'>\n              <button type='button' id='seePrevRecords' class='btn btn-primary btn-sm'>\n                <i class='fa fa-arrow-left'></i></button>\n              <button type='button' id='seeNextRecords' class='btn btn-primary btn-sm'>\n                <i class='fa fa-arrow-right'></i></button>\n            </div>\n            <h4 id='valueListMeta'></h4>\n          </div>\n            <div id='valuesList'></div>\n        </div>\n    "),i.select(".fileContainer").append("div").classed("helpInfo",!0),this.$helpInfo=i.select(".helpInfo").html("\n    <p>"+f.h+'</p>\n      <table class=\'demo\'>\n        <thead>\n        <tr>\n          <th>Source</th><th>Target</th><th>Time</th><th>Value</th><th>SourceTag</th><th>TargetTag</th><th>Attribute</th>\n        </tr>\n        </thead>\n        <tbody>\n        <tr>\n          <td width="10%">Assign an appropriate name for the source nodes of flows.</td>\n          <td width="10%">Assign an appropriate name for the target nodes of flows.</td>\n          <td width="25%">Assign the time column name here. Use "Quarter" (e.g., 20184 or 201812) or "Month" (3, 4).\n              Only <span class="highlight"><strong>numeric</strong></span> values are possible (currently).</td>\n          <td width="25%">Assign the value column name here. Better keep it short (e.g., currency sign).\n              Use <span class="highlight"><strong>dot</strong></span> separation for comma values (e.g., 34.56).\n              Thousand separators are made automatically.</td>\n          <td width="10%">Assign the tag name referring to the source nodes.</td>\n          <td width="10%">Assign the tag name referring to the target nodes.</td>\n          <td width="10%">Add attributes here (currently only one supported).</td>\n        </tr>\n        </tbody>\n      </table>\n      <br/>\n    '),this.$chaningHeading=i.select("#informationText"),i.select("#showMoreBtn").attr("disabled",!0).style("opacity",0),this.$btnNext=s("#seeNextRecords").hide(),this.$btnPrev=s("#seePrevRecords").hide()},t.prototype.attachListener=function(){var t=this;s('a[data-toggle="tab"]').on("show.bs.tab",function(e){t.currentTab=s(e.target).text().trim()}),this.$node.select("#submitFile").on("click",function(e){h.default.log("import submit button",""),u.delay(4e3).log("Data import started."),i.select("#showMoreBtn").attr("disabled",!0).style("opacity",0),t.$btnNext=s("#seeNextRecords").hide(),t.$btnPrev=s("#seePrevRecords").hide(),i.select(".ctrlContainer").classed("invisibleClass",!0),i.select("#valuesList").selectAll("*").remove(),n.i(c.f)(t.$chaningHeading,"View data, load new or proceed",500),t.editMode=!1;var r=s("#fileByUrl").val(),o=i.select("#files").node();if("Sample Data"===t.currentTab){var a=i.select(".downloadTable tr.selected").datum().file;h.default.log("import sample",a),t.handleFileUrl(a)}if("URL"===t.currentTab)if(""!==r)if(".csv"===r.substr(-4)||".csv?dl=0"===r.substr(-9))h.default.log("import url",r),t.handleFileUrl(r);else{var l="Only files with a .csv ending can be loaded by url!";u.closeLogOnClick(!0).delay(0).error(l)}else{var l="Please provide a URL!";u.closeLogOnClick(!0).delay(0).error(l)}if("File"===t.currentTab)if(void 0!==o.files[0])h.default.log("import file",o.files[0]),t.handleFileUpload(o);else{var l="Please select a file order to proceed!";u.closeLogOnClick(!0).delay(0).error(l)}var d=i.event;d.preventDefault(),d.stopPropagation()}),this.$node.select("#showMoreBtn").on("click",function(e){h.default.log("import preview show button",""),u.delay(4e3).log("Viewing the detail table.");var n=t.parseResults.data;t.previewData(n),t.editMode=!0,t.$tableRows=s(".valueTable tbody tr"),t.trLength=t.$tableRows.length,t.$tableRows.hide(),t.$tableRows.slice(0,t.rowsToShow).show(),t.$btnNext.show();var r=i.event;r.preventDefault(),r.stopPropagation()}),this.$node.select("#seeNextRecords").on("click",function(e){h.default.log("import preview next button",""),t.$tableRows.slice(t.rowsToShow-10,t.rowsToShow).hide(),t.$tableRows.slice(t.rowsToShow,t.rowsToShow+10).show(),t.rowsToShow+=10,i.select("#valueListMeta").html("Viewing page: "+t.rowsToShow/10+" of "+Math.round(t.parseResults.data.length/10)),t.checkButtons();var n=i.event;n.preventDefault(),n.stopPropagation()}),this.$node.select("#seePrevRecords").on("click",function(e){h.default.log("import preview prev button",""),t.$tableRows.slice(t.rowsToShow-10,t.rowsToShow).hide(),t.rowsToShow-=10,i.select("#valueListMeta").html("Viewing page: "+t.rowsToShow/10+" of "+Math.round(t.parseResults.data.length/10)),t.$tableRows.slice(t.rowsToShow-10,t.rowsToShow).show(),t.checkButtons();var n=i.event;n.preventDefault(),n.stopPropagation()}),i.select(".nav panel-tab").selectAll("a").on("click",function(t){i.event.preventDefault(),console.log("testaaaaaaa")}),s("#files").change(function(){s("#filename").val(s(this).val().replace("C:\\fakepath\\",""))})},t.prototype.handleFileUrl=function(t){var e=this;a.parse(t,{download:!0,header:!0,skipEmptyLines:!0,complete:function(t,n){e.parseResults=t,e.uploadedFileName=n.toString().replace(/^.*[\\\/]/,"").split(".").slice(0,-1).join(".")||e+"",e.displayData(e.parseResults);var r="<small>"+(new Date).toLocaleString()+"</small>:\n                     <br/>File: "+e.uploadedFileName+"<br/><strong>Loaded successfully!</strong>";u.delay(5e3).success(r),h.default.log("import from url complete",e.uploadedFileName),e.startVisualization()}})},t.prototype.handleFileUpload=function(t){var e=this;a.parse(t.files[0],{header:!0,skipEmptyLines:!0,chunk:function(t,n){e.parseResults=t},error:function(t,e){var n="<small>"+(new Date).toLocaleString()+"</small>:\n                     <br/>"+t+"<br/>File: "+e.name;u.delay(7e3).error(n)},complete:function(t,n){e.uploadedFileName=n.name,e.displayData(e.parseResults);var r="<small>"+(new Date).toLocaleString()+"</small>:\n                     <br/>File: "+n.name+"<br/><strong>Loaded successfully!</strong>";u.delay(5e3).success(r),h.default.log("import file upload complete",n.name),e.startVisualization()}})},t.prototype.startVisualization=function(){var t=this;setTimeout(function(){if(h.default.log("start visualization as data loaded",""),t.reworkKeys(t.parseResults),t.reworkNegativeValues(t.parseResults),t.makeNodesUnique(),t.editMode){u.closeLogOnClick(!0).delay(0).error("You have <strong>ERRORS</strong> in your Table. This would produce a strange behaving\n                visualization. You should check the other error messages and clean your data."),console.log("In edit mode")}else console.log("Not in edit mode"),Promise.resolve(t.storeData()).then(function(t){o.a(d.a.EVENT_DATA_PARSED,"parsed"),i.select(".dataLoadingView").classed("invisibleClass",!0),i.select(".dataVizView").classed("invisibleClass",!1)})},4e3)},t.prototype.displayData=function(t){var e=t.errors;if(i.select("#valuesList").attr("max-width",s(window).innerWidth()/2).classed("scrollArea",!0),e.length>0){i.select("#showMoreBtn").attr("disabled",null).transition().duration(1250).style("opacity",1),this.editMode=!0;for(var n=0,r=e;n<r.length;n++){var o=r[n],a=o,l="<small>"+(new Date).toLocaleString()+"</small>:\n                     <br/><strong>Error:</strong>"+a.message+"\n                     <br/><strong>Search in Row: </strong> "+a.row;u.closeLogOnClick(!0).delay(0).error(l)}}var c="<strong>Success!!</strong> Data is loaded.\n                 <br/>Rows-total: "+this.parseResults.data.length;setTimeout(function(){u.delay(5e3).log(c)},1500)},t.prototype.storeData=function(){return l.setItem("data",this.parseResults.data).then(function(t){console.log("Saved data")}).catch(function(t){console.log("Error: ",t)}),localStorage.setItem("dataLoaded","loaded"),localStorage.setItem("fileName",this.uploadedFileName),localStorage.setItem("columnLabels",JSON.stringify(this.reworkColumnLabels(this.parseResults.meta.fields))),new Promise(function(t){t("Data storage finished.")})},t.prototype.reworkColumnLabels=function(t){for(var e={},n=0;n<t.length;n++)e[p[n]]=t[n];return e},t.prototype.reworkKeys=function(t){var e=t.data,n=Object.keys(e[0]);e.forEach(function(t){for(var e=0;e<n.length;e++)t[p[e]]=t[n[e]],delete t[n[e]]}),this.parseResults.data=e},t.prototype.makeNodesUnique=function(){var t=this.parseResults.data,e=i.set(t.map(function(t){return t.sourceNode}));t.filter(function(t){return e.has(t.targetNode)}).forEach(function(t){t.targetNode=t.targetNode+" "})},t.prototype.reworkNegativeValues=function(t){var e=t.data;e.forEach(function(t){t.valueNode<0&&(e=[t.targetNode,t.sourceNode],t.sourceNode=e[0],t.targetNode=e[1],t.valueNode=-1*t.valueNode+"");var e}),this.parseResults.data=e},t.prototype.previewData=function(t){console.log(this.parseResults.data.length),i.select(".ctrlContainer").classed("invisibleClass",!1),i.select("#valueListName").html("Name: "+this.uploadedFileName),i.select("#valueListMeta").html("Viewing page: "+this.rowsToShow/10+" of "+Math.round(this.parseResults.data.length/10));var e="<table class='table valueTable' >";e+="<thead>";for(var n in t[0])t[0].hasOwnProperty(n)&&(e+="<th>"+n+"</th>");e+="</thead>";for(var r=0,o=t;r<o.length;r++){var a=o[r],l=a;e+="<tr>";for(var u in l)l.hasOwnProperty(u)&&(e+="<td> "+l[u]+"</td>");e+="</tr>"}e+="</table>",s("#valuesList").html(e)},t.prototype.checkButtons=function(){this.rowsToShow>=this.trLength?this.$btnNext.hide():this.$btnPrev.show(),this.rowsToShow>10?this.$btnPrev.show():this.$btnPrev.hide(),10===this.rowsToShow&&(this.$btnNext.show(),this.$btnPrev.hide())},t}()},53:function(t,e,n){"use strict";function r(t,e,n,r){void 0===n&&(n=5),void 0===r&&(r=5),r-=2;var o=e;e-=2*n;var i=[];return t.each(function(){var t,a,s=d.select(this),l=s.text().split(/[ \f\n\r\t\v]+/).reverse(),u=1.1,c=s.style("text-anchor")||"start",f=[],h=0,p=s.attr("y"),g=parseFloat(s.attr("dy")),v=1;if(isNaN(g)&&(g=0),d.select(s.node().parentNode).classed("tick"))switch(c){case"start":a=-e/2;break;case"middle":a=0;break;case"end":a=e/2}else switch(c){case"start":a=n;break;case"middle":a=o/2;break;case"end":a=o-n}p=+(null===p?r:p);for(var b=s.text(null).append("tspan").attr("x",a).attr("y",p).attr("dy",g+"em");t=l.pop();)f.push(t),b.text(f.join(" ")),b.node().getComputedTextLength()>e&&f.length>1&&(f.pop(),b.text(f.join(" ")),f=[t],b=s.append("tspan").attr("x",a).attr("y",p).attr("dy",++h*u+g+"em").text(t),++v);i.push(v)}),i}function o(t,e,n){var r=document.createElement("a"),o=new Blob([t],{type:n});r.href=URL.createObjectURL(o),r.download=e,r.click()}function i(t){return Math.round(Math.pow(36,t+1)-Math.random()*Math.pow(36,t)).toString(36).slice(1)}function a(t,e,n){t.transition().duration(n).style("opacity",0).transition().duration(n).style("opacity",1).text(e)}function s(t,e){t.each(function(){for(var t=d.select(this),n=t.text().split(/\s+/),r=t.text("").append("tspan").attr("class","elip").text("..."),o=n.length,i=t.insert("tspan",":first-child").text(n.join(" "));i.node().getComputedTextLength()>e&&n.length>1;)n.pop(),i.text(n.join(" "));if(1===n.length)for(var a=n[0].length;i.node().getComputedTextLength()>e&&a>1;)a--,i.text(n[0].slice(0,a));n.length===o&&r.remove()})}function l(t,e){for(var n=t,r=function(t){var n=t.sourceNode.toLowerCase(),r=t.targetNode.toLowerCase();e.forEach(function(e){var o=e.key.toLowerCase();n===o&&(t.sourceTag=e.values),r===o&&(t.targetTag=e.values)})},o=0,i=n;o<i.length;o++){r(i[o])}f.setItem("data",n).then(function(t){return f.getItem("data")})}function u(t,e){var n=t.sourceLinks.length<=0?"from":"to",r=t.name+"\n    <br />\n    <table class='node'>\n      <tr><td>\n        <svg width='8' height='8'>\n          <rect width='8' height='8' fill='#DA5A6B' />\n        </svg>\n        "+(p(t.value)+e)+"\n      </td><td> "+n+" displayed elements.</td></tr>\n    ",o=t.overall-t.value>1e-5?"\n    <tr><td>\n      <svg width='8' height='8'>\n        <defs>\n          <pattern id='diagonalHatch2' patternUnits='userSpaceOnUse' width='4' height='4'>\n            <rect width='4' height='4' fill='#DA5A6B' />\n            <path d='M-1,1 l2,-2 M0,4 l4,-4 M3,5 l2,-2' stroke='#ffffff' 'stroke-width='1' />\n          </pattern>\n        </defs>\n      <rect width='8' height='8' fill='url(#diagonalHatch2)' />\n      </svg>\n    "+(p(t.overall-t.value)+e)+"</td><td>are not displayed.</td></tr>\n    <tr><td>"+(p(t.overall)+e)+"</td><td>in total.</td></tr>\n    ":"";g.mouseOver(t,r+o+"</table>","T2")}function c(t){return t={},t.sourceNode="source",t.targetNode="target",t.timeNode="time",t.valueNode="value",t.sourceTag="sourceHash",t.targetTag="targetHash",t.attribute1="attribute 1",t}var d=n(8),f=(n.n(d),n(54));n.n(f);e.e=r,n.d(e,"c",function(){return p}),e.b=o,e.a=i,e.f=a,e.i=s,e.j=l,n.d(e,"g",function(){return g}),e.h=u,e.d=c;var h=d.format(",.0f"),p=function(t){return h(t).replace(/,/g,".")},g=function(){function t(){}return t.mouseOver=function(e,n,r){if("T1"===r)t.tooltip1.transition().duration(200).style("opacity",.9),t.tooltip1.html(n).style("left",d.event.pageX-20+"px").style("top",d.event.pageY-140+"px");else{var o=d.event.pageX,i=document.documentElement.clientWidth;o+200>i?o=i-200:o-=20,t.tooltip2.transition().duration(200).style("opacity",.9),t.tooltip2.html(n).style("left",o+"px").style("top",d.event.pageY+"px")}},t.mouseOut=function(e){t.tooltip1.transition().duration(500).style("opacity",0),t.tooltip2.transition().duration(500).style("opacity",0)},t}();g.tooltip1=d.select("body").append("div").attr("class","tooltip").style("opacity",0).style("z-index","200000"),g.tooltip2=d.select("body").append("div").attr("class","tooltip2").style("opacity",0).style("z-index","200000")},54:function(t,e,n){(function(e){var n,n;!function(e){t.exports=e()}(function(){return function t(e,r,o){function i(s,l){if(!r[s]){if(!e[s]){var u="function"==typeof n&&n;if(!l&&u)return n(s,!0);if(a)return a(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var d=r[s]={exports:{}};e[s][0].call(d.exports,function(t){var n=e[s][1][t];return i(n||t)},d,d.exports,t,e,r,o)}return r[s].exports}for(var a="function"==typeof n&&n,s=0;s<o.length;s++)i(o[s]);return i}({1:[function(t,n,r){(function(t){"use strict";function e(){c=!0;for(var t,e,n=d.length;n;){for(e=d,d=[],t=-1;++t<n;)e[t]();n=d.length}c=!1}function r(t){1!==d.push(t)||c||o()}var o,i=t.MutationObserver||t.WebKitMutationObserver;if(i){var a=0,s=new i(e),l=t.document.createTextNode("");s.observe(l,{characterData:!0}),o=function(){l.data=a=++a%2}}else if(t.setImmediate||void 0===t.MessageChannel)o="document"in t&&"onreadystatechange"in t.document.createElement("script")?function(){var n=t.document.createElement("script");n.onreadystatechange=function(){e(),n.onreadystatechange=null,n.parentNode.removeChild(n),n=null},t.document.documentElement.appendChild(n)}:function(){setTimeout(e,0)};else{var u=new t.MessageChannel;u.port1.onmessage=e,o=function(){u.port2.postMessage(0)}}var c,d=[];n.exports=r}).call(this,void 0!==e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(t,e,n){"use strict";function r(){}function o(t){if("function"!=typeof t)throw new TypeError("resolver must be a function");this.state=y,this.queue=[],this.outcome=void 0,t!==r&&l(this,t)}function i(t,e,n){this.promise=t,"function"==typeof e&&(this.onFulfilled=e,this.callFulfilled=this.otherCallFulfilled),"function"==typeof n&&(this.onRejected=n,this.callRejected=this.otherCallRejected)}function a(t,e,n){p(function(){var r;try{r=e(n)}catch(e){return g.reject(t,e)}r===t?g.reject(t,new TypeError("Cannot resolve promise with itself")):g.resolve(t,r)})}function s(t){var e=t&&t.then;if(t&&"object"==typeof t&&"function"==typeof e)return function(){e.apply(t,arguments)}}function l(t,e){function n(e){i||(i=!0,g.reject(t,e))}function r(e){i||(i=!0,g.resolve(t,e))}function o(){e(r,n)}var i=!1,a=u(o);"error"===a.status&&n(a.value)}function u(t,e){var n={};try{n.value=t(e),n.status="success"}catch(t){n.status="error",n.value=t}return n}function c(t){return t instanceof this?t:g.resolve(new this(r),t)}function d(t){var e=new this(r);return g.reject(e,t)}function f(t){function e(t,e){function r(t){a[e]=t,++s!==o||i||(i=!0,g.resolve(u,a))}n.resolve(t).then(r,function(t){i||(i=!0,g.reject(u,t))})}var n=this;if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(new TypeError("must be an array"));var o=t.length,i=!1;if(!o)return this.resolve([]);for(var a=new Array(o),s=0,l=-1,u=new this(r);++l<o;)e(t[l],l);return u}function h(t){function e(t){n.resolve(t).then(function(t){i||(i=!0,g.resolve(s,t))},function(t){i||(i=!0,g.reject(s,t))})}var n=this;if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(new TypeError("must be an array"));var o=t.length,i=!1;if(!o)return this.resolve([]);for(var a=-1,s=new this(r);++a<o;)e(t[a]);return s}var p=t(1),g={},v=["REJECTED"],b=["FULFILLED"],y=["PENDING"];e.exports=n=o,o.prototype.catch=function(t){return this.then(null,t)},o.prototype.then=function(t,e){if("function"!=typeof t&&this.state===b||"function"!=typeof e&&this.state===v)return this;var n=new this.constructor(r);if(this.state!==y){a(n,this.state===b?t:e,this.outcome)}else this.queue.push(new i(n,t,e));return n},i.prototype.callFulfilled=function(t){g.resolve(this.promise,t)},i.prototype.otherCallFulfilled=function(t){a(this.promise,this.onFulfilled,t)},i.prototype.callRejected=function(t){g.reject(this.promise,t)},i.prototype.otherCallRejected=function(t){a(this.promise,this.onRejected,t)},g.resolve=function(t,e){var n=u(s,e);if("error"===n.status)return g.reject(t,n.value);var r=n.value;if(r)l(t,r);else{t.state=b,t.outcome=e;for(var o=-1,i=t.queue.length;++o<i;)t.queue[o].callFulfilled(e)}return t},g.reject=function(t,e){t.state=v,t.outcome=e;for(var n=-1,r=t.queue.length;++n<r;)t.queue[n].callRejected(e);return t},n.resolve=c,n.reject=d,n.all=f,n.race=h},{1:1}],3:[function(t,n,r){(function(e){"use strict";"function"!=typeof e.Promise&&(e.Promise=t(2))}).call(this,void 0!==e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{2:2}],4:[function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(){try{if("undefined"!=typeof indexedDB)return indexedDB;if("undefined"!=typeof webkitIndexedDB)return webkitIndexedDB;if("undefined"!=typeof mozIndexedDB)return mozIndexedDB;if("undefined"!=typeof OIndexedDB)return OIndexedDB;if("undefined"!=typeof msIndexedDB)return msIndexedDB}catch(t){}}function i(){try{if(!at)return!1;var t="undefined"!=typeof openDatabase&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),e="function"==typeof fetch&&-1!==fetch.toString().indexOf("[native code");return(!t||e)&&"undefined"!=typeof indexedDB&&"undefined"!=typeof IDBKeyRange}catch(t){return!1}}function a(){return"function"==typeof openDatabase}function s(){try{return"undefined"!=typeof localStorage&&"setItem"in localStorage&&localStorage.setItem}catch(t){return!1}}function l(t,e){t=t||[],e=e||{};try{return new Blob(t,e)}catch(i){if("TypeError"!==i.name)throw i;for(var n="undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder,r=new n,o=0;o<t.length;o+=1)r.append(t[o]);return r.getBlob(e.type)}}function u(t,e){e&&t.then(function(t){e(null,t)},function(t){e(t)})}function c(t,e,n){"function"==typeof e&&t.then(e),"function"==typeof n&&t.catch(n)}function d(t){for(var e=t.length,n=new ArrayBuffer(e),r=new Uint8Array(n),o=0;o<e;o++)r[o]=t.charCodeAt(o);return n}function f(t){return new ut(function(e){var n=t.transaction(ct,"readwrite"),r=l([""]);n.objectStore(ct).put(r,"key"),n.onabort=function(t){t.preventDefault(),t.stopPropagation(),e(!1)},n.oncomplete=function(){var t=navigator.userAgent.match(/Chrome\/(\d+)/),n=navigator.userAgent.match(/Edge\//);e(n||!t||parseInt(t[1],10)>=43)}}).catch(function(){return!1})}function h(t){return"boolean"==typeof st?ut.resolve(st):f(t).then(function(t){return st=t})}function p(t){var e=lt[t.name],n={};n.promise=new ut(function(t){n.resolve=t}),e.deferredOperations.push(n),e.dbReady?e.dbReady=e.dbReady.then(function(){return n.promise}):e.dbReady=n.promise}function g(t){var e=lt[t.name],n=e.deferredOperations.pop();n&&n.resolve()}function v(t,e){return new ut(function(n,r){if(t.db){if(!e)return n(t.db);p(t),t.db.close()}var o=[t.name];e&&o.push(t.version);var i=at.open.apply(at,o);e&&(i.onupgradeneeded=function(e){var n=i.result;try{n.createObjectStore(t.storeName),e.oldVersion<=1&&n.createObjectStore(ct)}catch(n){if("ConstraintError"!==n.name)throw n;console.warn('The database "'+t.name+'" has been upgraded from version '+e.oldVersion+" to version "+e.newVersion+', but the storage "'+t.storeName+'" already exists.')}}),i.onerror=function(t){t.preventDefault(),r(i.error)},i.onsuccess=function(){n(i.result),g(t)}})}function b(t){return v(t,!1)}function y(t){return v(t,!0)}function m(t,e){if(!t.db)return!0;var n=!t.db.objectStoreNames.contains(t.storeName),r=t.version<t.db.version,o=t.version>t.db.version;if(r&&(t.version!==e&&console.warn('The database "'+t.name+"\" can't be downgraded from version "+t.db.version+" to version "+t.version+"."),t.version=t.db.version),o||n){if(n){var i=t.db.version+1;i>t.version&&(t.version=i)}return!0}return!1}function w(t){return new ut(function(e,n){var r=new FileReader;r.onerror=n,r.onloadend=function(n){var r=btoa(n.target.result||"");e({__local_forage_encoded_blob:!0,data:r,type:t.type})},r.readAsBinaryString(t)})}function _(t){return l([d(atob(t.data))],{type:t.type})}function k(t){return t&&t.__local_forage_encoded_blob}function x(t){var e=this,n=e._initReady().then(function(){var t=lt[e._dbInfo.name];if(t&&t.dbReady)return t.dbReady});return c(n,t,t),n}function S(t){function e(){return ut.resolve()}var n=this,r={db:null};if(t)for(var o in t)r[o]=t[o];lt||(lt={});var i=lt[r.name];i||(i={forages:[],db:null,dbReady:null,deferredOperations:[]},lt[r.name]=i),i.forages.push(n),n._initReady||(n._initReady=n.ready,n.ready=x);for(var a=[],s=0;s<i.forages.length;s++){var l=i.forages[s];l!==n&&a.push(l._initReady().catch(e))}var u=i.forages.slice(0);return ut.all(a).then(function(){return r.db=i.db,b(r)}).then(function(t){return r.db=t,m(r,n._defaultConfig.version)?y(r):t}).then(function(t){r.db=i.db=t,n._dbInfo=r;for(var e=0;e<u.length;e++){var o=u[e];o!==n&&(o._dbInfo.db=r.db,o._dbInfo.version=r.version)}})}function C(t,e){var n=this;"string"!=typeof t&&(console.warn(t+" used as a key, but it is not a string."),t=String(t));var r=new ut(function(e,r){n.ready().then(function(){var o=n._dbInfo,i=o.db.transaction(o.storeName,"readonly").objectStore(o.storeName),a=i.get(t);a.onsuccess=function(){var t=a.result;void 0===t&&(t=null),k(t)&&(t=_(t)),e(t)},a.onerror=function(){r(a.error)}}).catch(r)});return u(r,e),r}function E(t,e){var n=this,r=new ut(function(e,r){n.ready().then(function(){var o=n._dbInfo,i=o.db.transaction(o.storeName,"readonly").objectStore(o.storeName),a=i.openCursor(),s=1;a.onsuccess=function(){var n=a.result;if(n){var r=n.value;k(r)&&(r=_(r));var o=t(r,n.key,s++);void 0!==o?e(o):n.continue()}else e()},a.onerror=function(){r(a.error)}}).catch(r)});return u(r,e),r}function L(t,e,n){var r=this;"string"!=typeof t&&(console.warn(t+" used as a key, but it is not a string."),t=String(t));var o=new ut(function(n,o){var i;r.ready().then(function(){return i=r._dbInfo,"[object Blob]"===dt.call(e)?h(i.db).then(function(t){return t?e:w(e)}):e}).then(function(e){var r=i.db.transaction(i.storeName,"readwrite"),a=r.objectStore(i.storeName),s=a.put(e,t);null===e&&(e=void 0),r.oncomplete=function(){void 0===e&&(e=null),n(e)},r.onabort=r.onerror=function(){var t=s.error?s.error:s.transaction.error;o(t)}}).catch(o)});return u(o,n),o}function I(t,e){var n=this;"string"!=typeof t&&(console.warn(t+" used as a key, but it is not a string."),t=String(t));var r=new ut(function(e,r){n.ready().then(function(){var o=n._dbInfo,i=o.db.transaction(o.storeName,"readwrite"),a=i.objectStore(o.storeName),s=a.delete(t);i.oncomplete=function(){e()},i.onerror=function(){r(s.error)},i.onabort=function(){var t=s.error?s.error:s.transaction.error;r(t)}}).catch(r)});return u(r,e),r}function R(t){var e=this,n=new ut(function(t,n){e.ready().then(function(){var r=e._dbInfo,o=r.db.transaction(r.storeName,"readwrite"),i=o.objectStore(r.storeName),a=i.clear();o.oncomplete=function(){t()},o.onabort=o.onerror=function(){var t=a.error?a.error:a.transaction.error;n(t)}}).catch(n)});return u(n,t),n}function T(t){var e=this,n=new ut(function(t,n){e.ready().then(function(){var r=e._dbInfo,o=r.db.transaction(r.storeName,"readonly").objectStore(r.storeName),i=o.count();i.onsuccess=function(){t(i.result)},i.onerror=function(){n(i.error)}}).catch(n)});return u(n,t),n}function O(t,e){var n=this,r=new ut(function(e,r){if(t<0)return void e(null);n.ready().then(function(){var o=n._dbInfo,i=o.db.transaction(o.storeName,"readonly").objectStore(o.storeName),a=!1,s=i.openCursor();s.onsuccess=function(){var n=s.result;if(!n)return void e(null);0===t?e(n.key):a?e(n.key):(a=!0,n.advance(t))},s.onerror=function(){r(s.error)}}).catch(r)});return u(r,e),r}function D(t){var e=this,n=new ut(function(t,n){e.ready().then(function(){var r=e._dbInfo,o=r.db.transaction(r.storeName,"readonly").objectStore(r.storeName),i=o.openCursor(),a=[];i.onsuccess=function(){var e=i.result;if(!e)return void t(a);a.push(e.key),e.continue()},i.onerror=function(){n(i.error)}}).catch(n)});return u(n,t),n}function N(t){var e,n,r,o,i,a=.75*t.length,s=t.length,l=0;"="===t[t.length-1]&&(a--,"="===t[t.length-2]&&a--);var u=new ArrayBuffer(a),c=new Uint8Array(u);for(e=0;e<s;e+=4)n=ht.indexOf(t[e]),r=ht.indexOf(t[e+1]),o=ht.indexOf(t[e+2]),i=ht.indexOf(t[e+3]),c[l++]=n<<2|r>>4,c[l++]=(15&r)<<4|o>>2,c[l++]=(3&o)<<6|63&i;return u}function A(t){var e,n=new Uint8Array(t),r="";for(e=0;e<n.length;e+=3)r+=ht[n[e]>>2],r+=ht[(3&n[e])<<4|n[e+1]>>4],r+=ht[(15&n[e+1])<<2|n[e+2]>>6],r+=ht[63&n[e+2]];return n.length%3==2?r=r.substring(0,r.length-1)+"=":n.length%3==1&&(r=r.substring(0,r.length-2)+"=="),r}function B(t,e){var n="";if(t&&(n=Tt.call(t)),t&&("[object ArrayBuffer]"===n||t.buffer&&"[object ArrayBuffer]"===Tt.call(t.buffer))){var r,o=vt;t instanceof ArrayBuffer?(r=t,o+=yt):(r=t.buffer,"[object Int8Array]"===n?o+=wt:"[object Uint8Array]"===n?o+=_t:"[object Uint8ClampedArray]"===n?o+=kt:"[object Int16Array]"===n?o+=xt:"[object Uint16Array]"===n?o+=Ct:"[object Int32Array]"===n?o+=St:"[object Uint32Array]"===n?o+=Et:"[object Float32Array]"===n?o+=Lt:"[object Float64Array]"===n?o+=It:e(new Error("Failed to get type for BinaryArray"))),e(o+A(r))}else if("[object Blob]"===n){var i=new FileReader;i.onload=function(){var n=pt+t.type+"~"+A(this.result);e(vt+mt+n)},i.readAsArrayBuffer(t)}else try{e(JSON.stringify(t))}catch(n){console.error("Couldn't convert value into a JSON string: ",t),e(null,n)}}function j(t){if(t.substring(0,bt)!==vt)return JSON.parse(t);var e,n=t.substring(Rt),r=t.substring(bt,Rt);if(r===mt&&gt.test(n)){var o=n.match(gt);e=o[1],n=n.substring(o[0].length)}var i=N(n);switch(r){case yt:return i;case mt:return l([i],{type:e});case wt:return new Int8Array(i);case _t:return new Uint8Array(i);case kt:return new Uint8ClampedArray(i);case xt:return new Int16Array(i);case Ct:return new Uint16Array(i);case St:return new Int32Array(i);case Et:return new Uint32Array(i);case Lt:return new Float32Array(i);case It:return new Float64Array(i);default:throw new Error("Unkown type: "+r)}}function P(t){var e=this,n={db:null};if(t)for(var r in t)n[r]="string"!=typeof t[r]?t[r].toString():t[r];var o=new ut(function(t,r){try{n.db=openDatabase(n.name,String(n.version),n.description,n.size)}catch(t){return r(t)}n.db.transaction(function(o){o.executeSql("CREATE TABLE IF NOT EXISTS "+n.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],function(){e._dbInfo=n,t()},function(t,e){r(e)})})});return n.serializer=Ot,o}function M(t,e){var n=this;"string"!=typeof t&&(console.warn(t+" used as a key, but it is not a string."),t=String(t));var r=new ut(function(e,r){n.ready().then(function(){var o=n._dbInfo;o.db.transaction(function(n){n.executeSql("SELECT * FROM "+o.storeName+" WHERE key = ? LIMIT 1",[t],function(t,n){var r=n.rows.length?n.rows.item(0).value:null;r&&(r=o.serializer.deserialize(r)),e(r)},function(t,e){r(e)})})}).catch(r)});return u(r,e),r}function z(t,e){var n=this,r=new ut(function(e,r){n.ready().then(function(){var o=n._dbInfo;o.db.transaction(function(n){n.executeSql("SELECT * FROM "+o.storeName,[],function(n,r){for(var i=r.rows,a=i.length,s=0;s<a;s++){var l=i.item(s),u=l.value;if(u&&(u=o.serializer.deserialize(u)),void 0!==(u=t(u,l.key,s+1)))return void e(u)}e()},function(t,e){r(e)})})}).catch(r)});return u(r,e),r}function F(t,e,n,r){var o=this;"string"!=typeof t&&(console.warn(t+" used as a key, but it is not a string."),t=String(t));var i=new ut(function(i,a){o.ready().then(function(){void 0===e&&(e=null);var s=e,l=o._dbInfo;l.serializer.serialize(e,function(e,u){u?a(u):l.db.transaction(function(n){n.executeSql("INSERT OR REPLACE INTO "+l.storeName+" (key, value) VALUES (?, ?)",[t,e],function(){i(s)},function(t,e){a(e)})},function(e){if(e.code===e.QUOTA_ERR){if(r>0)return void i(F.apply(o,[t,s,n,r-1]));a(e)}})})}).catch(a)});return u(i,n),i}function U(t,e,n){return F.apply(this,[t,e,n,1])}function q(t,e){var n=this;"string"!=typeof t&&(console.warn(t+" used as a key, but it is not a string."),t=String(t));var r=new ut(function(e,r){n.ready().then(function(){var o=n._dbInfo;o.db.transaction(function(n){n.executeSql("DELETE FROM "+o.storeName+" WHERE key = ?",[t],function(){e()},function(t,e){r(e)})})}).catch(r)});return u(r,e),r}function V(t){var e=this,n=new ut(function(t,n){e.ready().then(function(){var r=e._dbInfo;r.db.transaction(function(e){e.executeSql("DELETE FROM "+r.storeName,[],function(){t()},function(t,e){n(e)})})}).catch(n)});return u(n,t),n}function $(t){var e=this,n=new ut(function(t,n){e.ready().then(function(){var r=e._dbInfo;r.db.transaction(function(e){e.executeSql("SELECT COUNT(key) as c FROM "+r.storeName,[],function(e,n){var r=n.rows.item(0).c;t(r)},function(t,e){n(e)})})}).catch(n)});return u(n,t),n}function W(t,e){var n=this,r=new ut(function(e,r){n.ready().then(function(){var o=n._dbInfo;o.db.transaction(function(n){n.executeSql("SELECT key FROM "+o.storeName+" WHERE id = ? LIMIT 1",[t+1],function(t,n){var r=n.rows.length?n.rows.item(0).key:null;e(r)},function(t,e){r(e)})})}).catch(r)});return u(r,e),r}function H(t){var e=this,n=new ut(function(t,n){e.ready().then(function(){var r=e._dbInfo;r.db.transaction(function(e){e.executeSql("SELECT key FROM "+r.storeName,[],function(e,n){for(var r=[],o=0;o<n.rows.length;o++)r.push(n.rows.item(o).key);t(r)},function(t,e){n(e)})})}).catch(n)});return u(n,t),n}function K(t){var e=this,n={};if(t)for(var r in t)n[r]=t[r];return n.keyPrefix=n.name+"/",n.storeName!==e._defaultConfig.storeName&&(n.keyPrefix+=n.storeName+"/"),e._dbInfo=n,n.serializer=Ot,ut.resolve()}function Q(t){var e=this,n=e.ready().then(function(){for(var t=e._dbInfo.keyPrefix,n=localStorage.length-1;n>=0;n--){var r=localStorage.key(n);0===r.indexOf(t)&&localStorage.removeItem(r)}});return u(n,t),n}function Y(t,e){var n=this;"string"!=typeof t&&(console.warn(t+" used as a key, but it is not a string."),t=String(t));var r=n.ready().then(function(){var e=n._dbInfo,r=localStorage.getItem(e.keyPrefix+t);return r&&(r=e.serializer.deserialize(r)),r});return u(r,e),r}function J(t,e){var n=this,r=n.ready().then(function(){for(var e=n._dbInfo,r=e.keyPrefix,o=r.length,i=localStorage.length,a=1,s=0;s<i;s++){var l=localStorage.key(s);if(0===l.indexOf(r)){var u=localStorage.getItem(l);if(u&&(u=e.serializer.deserialize(u)),void 0!==(u=t(u,l.substring(o),a++)))return u}}});return u(r,e),r}function X(t,e){var n=this,r=n.ready().then(function(){var e,r=n._dbInfo;try{e=localStorage.key(t)}catch(t){e=null}return e&&(e=e.substring(r.keyPrefix.length)),e});return u(r,e),r}function G(t){var e=this,n=e.ready().then(function(){for(var t=e._dbInfo,n=localStorage.length,r=[],o=0;o<n;o++)0===localStorage.key(o).indexOf(t.keyPrefix)&&r.push(localStorage.key(o).substring(t.keyPrefix.length));return r});return u(n,t),n}function Z(t){var e=this,n=e.keys().then(function(t){return t.length});return u(n,t),n}function tt(t,e){var n=this;"string"!=typeof t&&(console.warn(t+" used as a key, but it is not a string."),t=String(t));var r=n.ready().then(function(){var e=n._dbInfo;localStorage.removeItem(e.keyPrefix+t)});return u(r,e),r}function et(t,e,n){var r=this;"string"!=typeof t&&(console.warn(t+" used as a key, but it is not a string."),t=String(t));var o=r.ready().then(function(){void 0===e&&(e=null);var n=e;return new ut(function(o,i){var a=r._dbInfo;a.serializer.serialize(e,function(e,r){if(r)i(r);else try{localStorage.setItem(a.keyPrefix+t,e),o(n)}catch(t){"QuotaExceededError"!==t.name&&"NS_ERROR_DOM_QUOTA_REACHED"!==t.name||i(t),i(t)}})})});return u(o,n),o}function nt(t,e){t[e]=function(){var n=arguments;return t.ready().then(function(){return t[e].apply(t,n)})}}function rt(){for(var t=1;t<arguments.length;t++){var e=arguments[t];if(e)for(var n in e)e.hasOwnProperty(n)&&(Ft(e[n])?arguments[0][n]=e[n].slice():arguments[0][n]=e[n])}return arguments[0]}function ot(t){for(var e in Bt)if(Bt.hasOwnProperty(e)&&Bt[e]===t)return!0;return!1}var it="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},at=o();"undefined"==typeof Promise&&t(3);var st,lt,ut=Promise,ct="local-forage-detect-blob-support",dt=Object.prototype.toString,ft={_driver:"asyncStorage",_initStorage:S,iterate:E,getItem:C,setItem:L,removeItem:I,clear:R,length:T,key:O,keys:D},ht="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",pt="~~local_forage_type~",gt=/^~~local_forage_type~([^~]+)~/,vt="__lfsc__:",bt=vt.length,yt="arbf",mt="blob",wt="si08",_t="ui08",kt="uic8",xt="si16",St="si32",Ct="ur16",Et="ui32",Lt="fl32",It="fl64",Rt=bt+yt.length,Tt=Object.prototype.toString,Ot={serialize:B,deserialize:j,stringToBuffer:N,bufferToString:A},Dt={_driver:"webSQLStorage",_initStorage:P,iterate:z,getItem:M,setItem:U,removeItem:q,clear:V,length:$,key:W,keys:H},Nt={_driver:"localStorageWrapper",_initStorage:K,iterate:J,getItem:Y,setItem:et,removeItem:tt,clear:Q,length:Z,key:X,keys:G},At={},Bt={INDEXEDDB:"asyncStorage",LOCALSTORAGE:"localStorageWrapper",WEBSQL:"webSQLStorage"},jt=[Bt.INDEXEDDB,Bt.WEBSQL,Bt.LOCALSTORAGE],Pt=["clear","getItem","iterate","key","keys","length","removeItem","setItem"],Mt={description:"",driver:jt.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1},zt={};zt[Bt.INDEXEDDB]=i(),zt[Bt.WEBSQL]=a(),zt[Bt.LOCALSTORAGE]=s();var Ft=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},Ut=function(){function t(e){r(this,t),this.INDEXEDDB=Bt.INDEXEDDB,this.LOCALSTORAGE=Bt.LOCALSTORAGE,this.WEBSQL=Bt.WEBSQL,this._defaultConfig=rt({},Mt),this._config=rt({},this._defaultConfig,e),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return t.prototype.config=function(t){if("object"===(void 0===t?"undefined":it(t))){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var e in t){if("storeName"===e&&(t[e]=t[e].replace(/\W/g,"_")),"version"===e&&"number"!=typeof t[e])return new Error("Database version must be a number.");this._config[e]=t[e]}return!("driver"in t&&t.driver)||this.setDriver(this._config.driver)}return"string"==typeof t?this._config[t]:this._config},t.prototype.defineDriver=function(t,e,n){var r=new ut(function(e,n){try{var r=t._driver,o=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver"),i=new Error("Custom driver name already in use: "+t._driver);if(!t._driver)return void n(o);if(ot(t._driver))return void n(i);for(var a=Pt.concat("_initStorage"),s=0;s<a.length;s++){var l=a[s];if(!l||!t[l]||"function"!=typeof t[l])return void n(o)}var u=ut.resolve(!0);"_support"in t&&(u=t._support&&"function"==typeof t._support?t._support():ut.resolve(!!t._support)),u.then(function(n){zt[r]=n,At[r]=t,e()},n)}catch(t){n(t)}});return c(r,e,n),r},t.prototype.driver=function(){return this._driver||null},t.prototype.getDriver=function(t,e,n){var r=this,o=ut.resolve().then(function(){if(!ot(t)){if(At[t])return At[t];throw new Error("Driver not found.")}switch(t){case r.INDEXEDDB:return ft;case r.LOCALSTORAGE:return Nt;case r.WEBSQL:return Dt}});return c(o,e,n),o},t.prototype.getSerializer=function(t){var e=ut.resolve(Ot);return c(e,t),e},t.prototype.ready=function(t){var e=this,n=e._driverSet.then(function(){return null===e._ready&&(e._ready=e._initDriver()),e._ready});return c(n,t,t),n},t.prototype.setDriver=function(t,e,n){function r(){a._config.driver=a.driver()}function o(t){return a._extend(t),r(),a._ready=a._initStorage(a._config),a._ready}function i(t){return function(){function e(){for(;n<t.length;){var i=t[n];return n++,a._dbInfo=null,a._ready=null,a.getDriver(i).then(o).catch(e)}r();var s=new Error("No available storage method found.");return a._driverSet=ut.reject(s),a._driverSet}var n=0;return e()}}var a=this;Ft(t)||(t=[t]);var s=this._getSupportedDrivers(t),l=null!==this._driverSet?this._driverSet.catch(function(){return ut.resolve()}):ut.resolve();return this._driverSet=l.then(function(){var t=s[0];return a._dbInfo=null,a._ready=null,a.getDriver(t).then(function(t){a._driver=t._driver,r(),a._wrapLibraryMethodsWithReady(),a._initDriver=i(s)})}).catch(function(){r();var t=new Error("No available storage method found.");return a._driverSet=ut.reject(t),a._driverSet}),c(this._driverSet,e,n),this._driverSet},t.prototype.supports=function(t){return!!zt[t]},t.prototype._extend=function(t){rt(this,t)},t.prototype._getSupportedDrivers=function(t){for(var e=[],n=0,r=t.length;n<r;n++){var o=t[n];this.supports(o)&&e.push(o)}return e},t.prototype._wrapLibraryMethodsWithReady=function(){for(var t=0;t<Pt.length;t++)nt(this,Pt[t])},t.prototype.createInstance=function(e){return new t(e)},t}(),qt=new Ut;e.exports=qt},{3:3}]},{},[4])(4)})}).call(e,n(14))},55:function(t,e,n){"use strict";n.d(e,"f",function(){return r}),n.d(e,"g",function(){return o}),n.d(e,"d",function(){return i}),n.d(e,"e",function(){return a}),n.d(e,"h",function(){return s}),n.d(e,"m",function(){return l}),n.d(e,"j",function(){return u}),n.d(e,"k",function(){return c}),n.d(e,"i",function(){return d}),n.d(e,"l",function(){return f}),n.d(e,"a",function(){return h}),n.d(e,"b",function(){return p}),n.d(e,"c",function(){return g});var r="<h4>Features of Netflower:</h4>Netflower is developed to explore large bipartite network data.\nThe tool supports you finding interesting aspects in the data. You cannot directly create visualizations out of it, but you can export the data\nbased on your exploration state.",o="<h4>Important Information:</h4>The data you load will only be stored locally on your computer.\nWhen you close the browser, the data is retained. When the computer is restarted or you upload new data,\nthe data and exploration steps are lost.",i="Your current <font color='#DA5A6B'><strong>FILTER</strong></font> settings are\ntoo restrictive. There is <strong>NO DATA</strong> to show!<br/>Please change your filter settings in order to show\ndata on the visualization.\n<br/><br/><p>Clicking the <span style='border: 1px solid grey; background-color: #f0f0f0; padding: 2px;\nborder-radius: 5px;'>Ok</span> button will <strong>reset</strong> all filters to default!</p>\n<p>Clicking the <span style='border: 1px solid grey; padding: 2px;border-radius: 5px;'>Cancel</span> button\nwill do nothing and you have to adjust the filters yourself to see some data.</p>",a="There are <font color='#DA5A6B'><strong>no tags</strong></font> to display tag flows.",s="<strong><h3>Data format:</h3></strong><br/>\nThis tool requires a specific format for the tables in order to visualize them appropriate. Also <strong>.CSV</strong> are\nonly accepted. If the required format isn't met, it will result in erros or no displayed data. The format of the\ntable headings defines all further views but needs to be in a specific order:",l="Upon hitting the <strong>OK</strong> button, you will be redirected to the data load page.<br/>\n<strong>NOTE:</strong> This will reload the page and the previous data will be lost!!<br/><br/>\nBe sure you don't lose anything important or save your progress before you proceed.",u="Select here the time range of the visualization.<br/>\n1) Click & Drag mouse for rectangle selection.<br/>\n2) Click one elment to make a single selection.<br/>\n3) CTRL + Click to make a multi selection.",c="Select here the attributes you want to filter for on the current visualization. The attributes\nare read from your imported .csv file. If you see no checkboxes here, you probably have no attributes defined.",d="Export logs for evaluation and testing purpose. The application tracks your actions and the state of the visualization the whole time. By clicking on the\nbutton a <strong>Log File</strong> will be created and saved locally on your machine.",f="<span class='label label-warning' style='font-weight: normal;'>Warning</span>\nYou have no time points selected! <br/> In order to prevent the application from showing nothing or unwanted results,\nthe last defined time points were choosen.",h="<span class='label label-warning' style='font-weight: normal;'>Warning</span>\nSomething went wrong, we can't find data! <br/> Reduce the amount of filters, reload the page or change your settings\nand try to export your data again.",p="<span class='label label-info' style='font-weight: normal; background: #45B07C;'>Info</span>\nYou are going to download a file with the name: <strong>flows</strong> and the current time stamp which contains the exported flow data of the current\nview. Proceed with OK if you want to download the file.",g="<span class='label label-info' style='font-weight: normal; background: #45B07C;'>Info</span>\nYou are going to download a file with the name: <strong>timeseries</strong> and the current time stamp which contains the exported data of the current\nview. Proceed with OK if you want to download the file."},76:function(t,e,n){(function(t){var r;!function(){"use strict";function o(){var t={parent:document.body,version:"1.0.12",defaultOkLabel:"Ok",okLabel:"Ok",defaultCancelLabel:"Cancel",cancelLabel:"Cancel",defaultMaxLogItems:2,maxLogItems:2,promptValue:"",promptPlaceholder:"",closeLogOnClick:!1,closeLogOnClickDefault:!1,delay:5e3,defaultDelay:5e3,logContainerClass:"alertify-logs",logContainerDefaultClass:"alertify-logs",dialogs:{buttons:{holder:"<nav>{{buttons}}</nav>",ok:"<button class='ok' tabindex='1'>{{ok}}</button>",cancel:"<button class='cancel' tabindex='2'>{{cancel}}</button>"},input:"<input type='text'>",message:"<p class='msg'>{{message}}</p>",log:"<div class='{{class}}'>{{message}}</div>"},defaultDialogs:{buttons:{holder:"<nav>{{buttons}}</nav>",ok:"<button class='ok' tabindex='1'>{{ok}}</button>",cancel:"<button class='cancel' tabindex='2'>{{cancel}}</button>"},input:"<input type='text'>",message:"<p class='msg'>{{message}}</p>",log:"<div class='{{class}}'>{{message}}</div>"},build:function(t){var e=this.dialogs.buttons.ok,n="<div class='dialog'><div>"+this.dialogs.message.replace("{{message}}",t.message);return"confirm"!==t.type&&"prompt"!==t.type||(e=this.dialogs.buttons.cancel+this.dialogs.buttons.ok),"prompt"===t.type&&(n+=this.dialogs.input),n=(n+this.dialogs.buttons.holder+"</div></div>").replace("{{buttons}}",e).replace("{{ok}}",this.okLabel).replace("{{cancel}}",this.cancelLabel)},setCloseLogOnClick:function(t){this.closeLogOnClick=!!t},close:function(t,e){this.closeLogOnClick&&t.addEventListener("click",function(){a(t)}),e=e&&!isNaN(+e)?+e:this.delay,0>e?a(t):e>0&&setTimeout(function(){a(t)},e)},dialog:function(t,e,n,r){return this.setup({type:e,message:t,onOkay:n,onCancel:r})},log:function(t,e,n){var r=document.querySelectorAll(".alertify-logs > div");if(r){var o=r.length-this.maxLogItems;if(o>=0)for(var i=0,a=o+1;a>i;i++)this.close(r[i],-1)}this.notify(t,e,n)},setLogPosition:function(t){this.logContainerClass="alertify-logs "+t},setupLogContainer:function(){var t=document.querySelector(".alertify-logs"),e=this.logContainerClass;return t||(t=document.createElement("div"),t.className=e,this.parent.appendChild(t)),t.className!==e&&(t.className=e),t},notify:function(e,n,r){var o=this.setupLogContainer(),i=document.createElement("div");i.className=n||"default",t.logTemplateMethod?i.innerHTML=t.logTemplateMethod(e):i.innerHTML=e,"function"==typeof r&&i.addEventListener("click",r),o.appendChild(i),setTimeout(function(){i.className+=" show"},10),this.close(i,this.delay)},setup:function(t){function e(e){"function"!=typeof e&&(e=function(){}),r&&r.addEventListener("click",function(r){t.onOkay&&"function"==typeof t.onOkay&&(i?t.onOkay(i.value,r):t.onOkay(r)),e(i?{buttonClicked:"ok",inputValue:i.value,event:r}:{buttonClicked:"ok",event:r}),a(n)}),o&&o.addEventListener("click",function(r){t.onCancel&&"function"==typeof t.onCancel&&t.onCancel(r),e({buttonClicked:"cancel",event:r}),a(n)}),i&&i.addEventListener("keyup",function(t){13===t.which&&r.click()})}var n=document.createElement("div");n.className="alertify hide",n.innerHTML=this.build(t);var r=n.querySelector(".ok"),o=n.querySelector(".cancel"),i=n.querySelector("input"),s=n.querySelector("label");i&&("string"==typeof this.promptPlaceholder&&(s?s.textContent=this.promptPlaceholder:i.placeholder=this.promptPlaceholder),"string"==typeof this.promptValue&&(i.value=this.promptValue));var l;return"function"==typeof Promise?l=new Promise(e):e(),this.parent.appendChild(n),setTimeout(function(){n.classList.remove("hide"),i&&t.type&&"prompt"===t.type?(i.select(),i.focus()):r&&r.focus()},100),l},okBtn:function(t){return this.okLabel=t,this},setDelay:function(t){return t=t||0,this.delay=isNaN(t)?this.defaultDelay:parseInt(t,10),this},cancelBtn:function(t){return this.cancelLabel=t,this},setMaxLogItems:function(t){this.maxLogItems=parseInt(t||this.defaultMaxLogItems)},theme:function(t){switch(t.toLowerCase()){case"bootstrap":this.dialogs.buttons.ok="<button class='ok btn btn-primary' tabindex='1'>{{ok}}</button>",this.dialogs.buttons.cancel="<button class='cancel btn btn-default' tabindex='2'>{{cancel}}</button>",this.dialogs.input="<input type='text' class='form-control'>";break;case"purecss":this.dialogs.buttons.ok="<button class='ok pure-button' tabindex='1'>{{ok}}</button>",this.dialogs.buttons.cancel="<button class='cancel pure-button' tabindex='2'>{{cancel}}</button>";break;case"mdl":case"material-design-light":this.dialogs.buttons.ok="<button class='ok mdl-button mdl-js-button mdl-js-ripple-effect'  tabindex='1'>{{ok}}</button>",this.dialogs.buttons.cancel="<button class='cancel mdl-button mdl-js-button mdl-js-ripple-effect' tabindex='2'>{{cancel}}</button>",this.dialogs.input="<div class='mdl-textfield mdl-js-textfield'><input class='mdl-textfield__input'><label class='md-textfield__label'></label></div>";break;case"angular-material":this.dialogs.buttons.ok="<button class='ok md-primary md-button' tabindex='1'>{{ok}}</button>",this.dialogs.buttons.cancel="<button class='cancel md-button' tabindex='2'>{{cancel}}</button>",this.dialogs.input="<div layout='column'><md-input-container md-no-float><input type='text'></md-input-container></div>";break;case"default":default:this.dialogs.buttons.ok=this.defaultDialogs.buttons.ok,this.dialogs.buttons.cancel=this.defaultDialogs.buttons.cancel,this.dialogs.input=this.defaultDialogs.input}},reset:function(){this.parent=document.body,this.theme("default"),this.okBtn(this.defaultOkLabel),this.cancelBtn(this.defaultCancelLabel),this.setMaxLogItems(),this.promptValue="",this.promptPlaceholder="",this.delay=this.defaultDelay,this.setCloseLogOnClick(this.closeLogOnClickDefault),this.setLogPosition("bottom left"),this.logTemplateMethod=null},injectCSS:function(){if(!document.querySelector("#alertifyCSS")){var t=document.getElementsByTagName("head")[0],e=document.createElement("style");e.type="text/css",e.id="alertifyCSS",e.innerHTML=".alertify-logs>*{padding:12px 24px;color:#fff;box-shadow:0 2px 5px 0 rgba(0,0,0,.2);border-radius:1px}.alertify-logs>*,.alertify-logs>.default{background:rgba(0,0,0,.8)}.alertify-logs>.error{background:rgba(244,67,54,.8)}.alertify-logs>.success{background:rgba(76,175,80,.9)}.alertify{position:fixed;background-color:rgba(0,0,0,.3);left:0;right:0;top:0;bottom:0;width:100%;height:100%;z-index:1}.alertify.hide{opacity:0;pointer-events:none}.alertify,.alertify.show{box-sizing:border-box;transition:all .33s cubic-bezier(.25,.8,.25,1)}.alertify,.alertify *{box-sizing:border-box}.alertify .dialog{padding:12px}.alertify .alert,.alertify .dialog{width:100%;margin:0 auto;position:relative;top:50%;transform:translateY(-50%)}.alertify .alert>*,.alertify .dialog>*{width:400px;max-width:95%;margin:0 auto;text-align:center;padding:12px;background:#fff;box-shadow:0 2px 4px -1px rgba(0,0,0,.14),0 4px 5px 0 rgba(0,0,0,.098),0 1px 10px 0 rgba(0,0,0,.084)}.alertify .alert .msg,.alertify .dialog .msg{padding:12px;margin-bottom:12px;margin:0;text-align:left}.alertify .alert input:not(.form-control),.alertify .dialog input:not(.form-control){margin-bottom:15px;width:100%;font-size:100%;padding:12px}.alertify .alert input:not(.form-control):focus,.alertify .dialog input:not(.form-control):focus{outline-offset:-2px}.alertify .alert nav,.alertify .dialog nav{text-align:right}.alertify .alert nav button:not(.btn):not(.pure-button):not(.md-button):not(.mdl-button),.alertify .dialog nav button:not(.btn):not(.pure-button):not(.md-button):not(.mdl-button){background:transparent;box-sizing:border-box;color:rgba(0,0,0,.87);position:relative;outline:0;border:0;display:inline-block;-ms-flex-align:center;-ms-grid-row-align:center;align-items:center;padding:0 6px;margin:6px 8px;line-height:36px;min-height:36px;white-space:nowrap;min-width:88px;text-align:center;text-transform:uppercase;font-size:14px;text-decoration:none;cursor:pointer;border:1px solid transparent;border-radius:2px}.alertify .alert nav button:not(.btn):not(.pure-button):not(.md-button):not(.mdl-button):active,.alertify .alert nav button:not(.btn):not(.pure-button):not(.md-button):not(.mdl-button):hover,.alertify .dialog nav button:not(.btn):not(.pure-button):not(.md-button):not(.mdl-button):active,.alertify .dialog nav button:not(.btn):not(.pure-button):not(.md-button):not(.mdl-button):hover{background-color:rgba(0,0,0,.05)}.alertify .alert nav button:not(.btn):not(.pure-button):not(.md-button):not(.mdl-button):focus,.alertify .dialog nav button:not(.btn):not(.pure-button):not(.md-button):not(.mdl-button):focus{border:1px solid rgba(0,0,0,.1)}.alertify .alert nav button.btn,.alertify .dialog nav button.btn{margin:6px 4px}.alertify-logs{position:fixed;z-index:1}.alertify-logs.bottom,.alertify-logs:not(.top){bottom:16px}.alertify-logs.left,.alertify-logs:not(.right){left:16px}.alertify-logs.left>*,.alertify-logs:not(.right)>*{float:left;transform:translateZ(0);height:auto}.alertify-logs.left>.show,.alertify-logs:not(.right)>.show{left:0}.alertify-logs.left>*,.alertify-logs.left>.hide,.alertify-logs:not(.right)>*,.alertify-logs:not(.right)>.hide{left:-110%}.alertify-logs.right{right:16px}.alertify-logs.right>*{float:right;transform:translateZ(0)}.alertify-logs.right>.show{right:0;opacity:1}.alertify-logs.right>*,.alertify-logs.right>.hide{right:-110%;opacity:0}.alertify-logs.top{top:0}.alertify-logs>*{box-sizing:border-box;transition:all .4s cubic-bezier(.25,.8,.25,1);position:relative;clear:both;backface-visibility:hidden;perspective:1000;max-height:0;margin:0;padding:0;overflow:hidden;opacity:0;pointer-events:none}.alertify-logs>.show{margin-top:12px;opacity:1;max-height:1000px;padding:12px;pointer-events:auto}",t.insertBefore(e,t.firstChild)}},removeCSS:function(){var t=document.querySelector("#alertifyCSS");t&&t.parentNode&&t.parentNode.removeChild(t)}};return t.injectCSS(),{_$$alertify:t,parent:function(e){t.parent=e},reset:function(){return t.reset(),this},alert:function(e,n,r){return t.dialog(e,"alert",n,r)||this},confirm:function(e,n,r){return t.dialog(e,"confirm",n,r)||this},prompt:function(e,n,r){return t.dialog(e,"prompt",n,r)||this},log:function(e,n){return t.log(e,"default",n),this},theme:function(e){return t.theme(e),this},success:function(e,n){return t.log(e,"success",n),this},error:function(e,n){return t.log(e,"error",n),this},cancelBtn:function(e){return t.cancelBtn(e),this},okBtn:function(e){return t.okBtn(e),this},delay:function(e){return t.setDelay(e),this},placeholder:function(e){return t.promptPlaceholder=e,this},defaultValue:function(e){return t.promptValue=e,this},maxLogItems:function(e){return t.setMaxLogItems(e),this},closeLogOnClick:function(e){return t.setCloseLogOnClick(!!e),this},logPosition:function(e){return t.setLogPosition(e||""),this},setLogTemplate:function(e){return t.logTemplateMethod=e,this},clearLogs:function(){return t.setupLogContainer().innerHTML="",this},version:t.version}}var i=500,a=function(t){if(t){var e=function(){t&&t.parentNode&&t.parentNode.removeChild(t)};t.classList.remove("show"),t.classList.add("hide"),t.addEventListener("transitionend",e),setTimeout(e,i)}};if(void 0!==t&&t&&t.exports){t.exports=function(){return new o};var s=new o;for(var l in s)t.exports[l]=s[l]}else void 0!==(r=function(){return new o}.call(e,n,e,t))&&(t.exports=r)}()}).call(e,n(101)(t))},98:function(t,e,n){var r,o,i;!function(n,a){o=[],r=a,void 0!==(i="function"==typeof r?r.apply(e,o):r)&&(t.exports=i)}(0,function(){"use strict";function t(t,e){if(e=e||{},e.dynamicTyping=e.dynamicTyping||!1,e.worker&&C.WORKERS_SUPPORTED){var n=c();return n.userStep=e.step,n.userChunk=e.chunk,n.userComplete=e.complete,n.userError=e.error,e.step=b(e.step),e.chunk=b(e.chunk),e.complete=b(e.complete),e.error=b(e.error),delete e.worker,void n.postMessage({input:t,config:e,workerId:n.id})}var s=null;return"string"==typeof t?s=e.download?new r(e):new i(e):!0===t.readable&&"function"==typeof t.read&&"function"==typeof t.on?s=new a(e):(m.File&&t instanceof File||t instanceof Object)&&(s=new o(e)),s.stream(t)}function e(t,e){function n(){"object"==typeof e&&("string"==typeof e.delimiter&&1===e.delimiter.length&&-1===C.BAD_DELIMITERS.indexOf(e.delimiter)&&(u=e.delimiter),("boolean"==typeof e.quotes||e.quotes instanceof Array)&&(s=e.quotes),"string"==typeof e.newline&&(c=e.newline),"string"==typeof e.quoteChar&&(d=e.quoteChar),"boolean"==typeof e.header&&(l=e.header))}function r(t){if("object"!=typeof t)return[];var e=[];for(var n in t)e.push(n);return e}function o(t,e){var n="";"string"==typeof t&&(t=JSON.parse(t)),"string"==typeof e&&(e=JSON.parse(e));var r=t instanceof Array&&t.length>0,o=!(e[0]instanceof Array);if(r&&l){for(var a=0;a<t.length;a++)a>0&&(n+=u),n+=i(t[a],a);e.length>0&&(n+=c)}for(var s=0;s<e.length;s++){for(var d=r?t.length:e[s].length,f=0;f<d;f++){f>0&&(n+=u);var h=r&&o?t[f]:f;n+=i(e[s][h],f)}s<e.length-1&&(n+=c)}return n}function i(t,e){return void 0===t||null===t?"":(t=t.toString().replace(f,d+d),"boolean"==typeof s&&s||s instanceof Array&&s[e]||a(t,C.BAD_DELIMITERS)||t.indexOf(u)>-1||" "===t.charAt(0)||" "===t.charAt(t.length-1)?d+t+d:t)}function a(t,e){for(var n=0;n<e.length;n++)if(t.indexOf(e[n])>-1)return!0;return!1}var s=!1,l=!0,u=",",c="\r\n",d='"';n();var f=new RegExp(d,"g");if("string"==typeof t&&(t=JSON.parse(t)),t instanceof Array){if(!t.length||t[0]instanceof Array)return o(null,t);if("object"==typeof t[0])return o(r(t[0]),t)}else if("object"==typeof t)return"string"==typeof t.data&&(t.data=JSON.parse(t.data)),t.data instanceof Array&&(t.fields||(t.fields=t.meta&&t.meta.fields),t.fields||(t.fields=t.data[0]instanceof Array?t.fields:r(t.data[0])),t.data[0]instanceof Array||"object"==typeof t.data[0]||(t.data=[t.data])),o(t.fields||[],t.data||[]);throw"exception: Unable to serialize unrecognized input"}function n(t){function e(t){var e=g(t);e.chunkSize=parseInt(e.chunkSize),t.step||t.chunk||(e.chunkSize=null),this._handle=new s(e),this._handle.streamer=this,this._config=e}this._handle=null,this._paused=!1,this._finished=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},e.call(this,t),this.parseChunk=function(t){if(this.isFirstChunk&&b(this._config.beforeFirstChunk)){var e=this._config.beforeFirstChunk(t);void 0!==e&&(t=e)}this.isFirstChunk=!1;var n=this._partialLine+t;this._partialLine="";var r=this._handle.parse(n,this._baseIndex,!this._finished);if(!this._handle.paused()&&!this._handle.aborted()){var o=r.meta.cursor;this._finished||(this._partialLine=n.substring(o-this._baseIndex),this._baseIndex=o),r&&r.data&&(this._rowCount+=r.data.length);var i=this._finished||this._config.preview&&this._rowCount>=this._config.preview;if(_)m.postMessage({results:r,workerId:C.WORKER_ID,finished:i});else if(b(this._config.chunk)){if(this._config.chunk(r,this._handle),this._paused)return;r=void 0,this._completeResults=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(r.data),this._completeResults.errors=this._completeResults.errors.concat(r.errors),this._completeResults.meta=r.meta),!i||!b(this._config.complete)||r&&r.meta.aborted||this._config.complete(this._completeResults,this._input),i||r&&r.meta.paused||this._nextChunk(),r}},this._sendError=function(t){b(this._config.error)?this._config.error(t):_&&this._config.error&&m.postMessage({workerId:C.WORKER_ID,error:t,finished:!1})}}function r(t){function e(t){var e=t.getResponseHeader("Content-Range");return null===e?-1:parseInt(e.substr(e.lastIndexOf("/")+1))}t=t||{},t.chunkSize||(t.chunkSize=C.RemoteChunkSize),n.call(this,t);var r;this._nextChunk=w?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(t){this._input=t,this._nextChunk()},this._readChunk=function(){if(this._finished)return void this._chunkLoaded();if(r=new XMLHttpRequest,this._config.withCredentials&&(r.withCredentials=this._config.withCredentials),w||(r.onload=v(this._chunkLoaded,this),r.onerror=v(this._chunkError,this)),r.open("GET",this._input,!w),this._config.chunkSize){var t=this._start+this._config.chunkSize-1;r.setRequestHeader("Range","bytes="+this._start+"-"+t),r.setRequestHeader("If-None-Match","webkit-no-cache")}try{r.send()}catch(t){this._chunkError(t.message)}w&&0===r.status?this._chunkError():this._start+=this._config.chunkSize},this._chunkLoaded=function(){if(4==r.readyState){if(r.status<200||r.status>=400)return void this._chunkError();this._finished=!this._config.chunkSize||this._start>e(r),this.parseChunk(r.responseText)}},this._chunkError=function(t){var e=r.statusText||t;this._sendError(e)}}function o(t){t=t||{},t.chunkSize||(t.chunkSize=C.LocalChunkSize),n.call(this,t);var e,r,o="undefined"!=typeof FileReader;this.stream=function(t){this._input=t,r=t.slice||t.webkitSlice||t.mozSlice,o?(e=new FileReader,e.onload=v(this._chunkLoaded,this),e.onerror=v(this._chunkError,this)):e=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var t=this._input;if(this._config.chunkSize){var n=Math.min(this._start+this._config.chunkSize,this._input.size);t=r.call(t,this._start,n)}var i=e.readAsText(t,this._config.encoding);o||this._chunkLoaded({target:{result:i}})},this._chunkLoaded=function(t){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(t.target.result)},this._chunkError=function(){this._sendError(e.error)}}function i(t){t=t||{},n.call(this,t);var e,r;this.stream=function(t){return e=t,r=t,this._nextChunk()},this._nextChunk=function(){if(!this._finished){var t=this._config.chunkSize,e=t?r.substr(0,t):r;return r=t?r.substr(t):"",this._finished=!r,this.parseChunk(e)}}}function a(t){t=t||{},n.call(this,t);var e=[],r=!0;this.stream=function(t){this._input=t,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._nextChunk=function(){e.length?this.parseChunk(e.shift()):r=!0},this._streamData=v(function(t){try{e.push("string"==typeof t?t:t.toString(this._config.encoding)),r&&(r=!1,this.parseChunk(e.shift()))}catch(t){this._streamError(t)}},this),this._streamError=v(function(t){this._streamCleanUp(),this._sendError(t.message)},this),this._streamEnd=v(function(){this._streamCleanUp(),this._finished=!0,this._streamData("")},this),this._streamCleanUp=v(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function s(t){function e(){if(k&&h&&(c("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+C.DefaultDelimiter+"'"),h=!1),t.skipEmptyLines)for(var e=0;e<k.data.length;e++)1===k.data[e].length&&""===k.data[e][0]&&k.data.splice(e--,1);return n()&&r(),i()}function n(){return t.header&&0===_.length}function r(){if(k){for(var t=0;n()&&t<k.data.length;t++)for(var e=0;e<k.data[t].length;e++)_.push(k.data[t][e]);k.data.splice(0,1)}}function o(e,n){return!0===(t.dynamicTyping[e]||t.dynamicTyping)?"true"===n||"TRUE"===n||"false"!==n&&"FALSE"!==n&&u(n):n}function i(){if(!k||!t.header&&!t.dynamicTyping)return k;for(var e=0;e<k.data.length;e++){for(var n=t.header?{}:[],r=0;r<k.data[e].length;r++){var i=r,a=k.data[e][r];t.header&&(i=r>=_.length?"__parsed_extra":_[r]),a=o(i,a),"__parsed_extra"===i?(n[i]=n[i]||[],n[i].push(a)):n[i]=a}k.data[e]=n,t.header&&(r>_.length?c("FieldMismatch","TooManyFields","Too many fields: expected "+_.length+" fields but parsed "+r,e):r<_.length&&c("FieldMismatch","TooFewFields","Too few fields: expected "+_.length+" fields but parsed "+r,e))}return t.header&&k.meta&&(k.meta.fields=_),k}function a(e,n){for(var r,o,i,a=[",","\t","|",";",C.RECORD_SEP,C.UNIT_SEP],s=0;s<a.length;s++){var u=a[s],c=0,d=0;i=void 0;for(var f=new l({delimiter:u,newline:n,preview:10}).parse(e),h=0;h<f.data.length;h++){var p=f.data[h].length;d+=p,void 0!==i?p>1&&(c+=Math.abs(p-i),i=p):i=p}f.data.length>0&&(d/=f.data.length),(void 0===o||c<o)&&d>1.99&&(o=c,r=u)}return t.delimiter=r,{successful:!!r,bestDelimiter:r}}function s(t){t=t.substr(0,1048576);var e=t.split("\r"),n=t.split("\n"),r=n.length>1&&n[0].length<e[0].length;if(1===e.length||r)return"\n";for(var o=0,i=0;i<e.length;i++)"\n"===e[i][0]&&o++;return o>=e.length/2?"\r\n":"\r"}function u(t){return p.test(t)?parseFloat(t):t}function c(t,e,n,r){k.errors.push({type:t,code:e,message:n,row:r})}var d,f,h,p=/^\s*-?(\d*\.?\d+|\d+\.?\d*)(e[-+]?\d+)?\s*$/i,v=this,y=0,m=!1,w=!1,_=[],k={data:[],errors:[],meta:{}};if(b(t.step)){var x=t.step;t.step=function(r){if(k=r,n())e();else{if(e(),0===k.data.length)return;y+=r.data.length,t.preview&&y>t.preview?f.abort():x(k,v)}}}this.parse=function(n,r,o){if(t.newline||(t.newline=s(n)),h=!1,t.delimiter)"function"==typeof t.delimiter&&(t.delimiter=t.delimiter(n),k.meta.delimiter=t.delimiter);else{var i=a(n,t.newline);i.successful?t.delimiter=i.bestDelimiter:(h=!0,t.delimiter=C.DefaultDelimiter),k.meta.delimiter=t.delimiter}var u=g(t);return t.preview&&t.header&&u.preview++,d=n,f=new l(u),k=f.parse(d,r,o),e(),m?{meta:{paused:!0}}:k||{meta:{paused:!1}}},this.paused=function(){return m},this.pause=function(){m=!0,f.abort(),d=d.substr(f.getCharIndex())},this.resume=function(){m=!1,v.streamer.parseChunk(d)},this.aborted=function(){return w},this.abort=function(){w=!0,f.abort(),k.meta.aborted=!0,b(t.complete)&&t.complete(k),d=""}}function l(t){t=t||{};var e=t.delimiter,n=t.newline,r=t.comments,o=t.step,i=t.preview,a=t.fastMode,s=t.quoteChar||'"';if(("string"!=typeof e||C.BAD_DELIMITERS.indexOf(e)>-1)&&(e=","),r===e)throw"Comment character same as delimiter";!0===r?r="#":("string"!=typeof r||C.BAD_DELIMITERS.indexOf(r)>-1)&&(r=!1),"\n"!=n&&"\r"!=n&&"\r\n"!=n&&(n="\n");var l=0,u=!1;this.parse=function(t,c,d){function f(t){k.push(t),C=l}function h(e){return d?g():(void 0===e&&(e=t.substr(l)),S.push(e),l=b,f(S),_&&v(),g())}function p(e){l=e,f(S),S=[],R=t.indexOf(n,l)}function g(t){return{data:k,errors:x,meta:{delimiter:e,linebreak:n,aborted:u,truncated:!!t,cursor:C+(c||0)}}}function v(){o(g()),k=[],x=[]}if("string"!=typeof t)throw"Input must be a string";var b=t.length,y=e.length,m=n.length,w=r.length,_="function"==typeof o;l=0;var k=[],x=[],S=[],C=0;if(!t)return g();if(a||!1!==a&&-1===t.indexOf(s)){for(var E=t.split(n),L=0;L<E.length;L++){var S=E[L];if(l+=S.length,L!==E.length-1)l+=n.length;else if(d)return g();if(!r||S.substr(0,w)!==r){if(_){if(k=[],f(S.split(e)),v(),u)return g()}else f(S.split(e));if(i&&L>=i)return k=k.slice(0,i),g(!0)}}return g()}for(var I=t.indexOf(e,l),R=t.indexOf(n,l),T=new RegExp(s+s,"g");;)if(t[l]!==s)if(r&&0===S.length&&t.substr(l,w)===r){if(-1===R)return g();l=R+m,R=t.indexOf(n,l),I=t.indexOf(e,l)}else if(-1!==I&&(I<R||-1===R))S.push(t.substring(l,I)),l=I+y,I=t.indexOf(e,l);else{if(-1===R)break;if(S.push(t.substring(l,R)),p(R+m),_&&(v(),u))return g();if(i&&k.length>=i)return g(!0)}else{var O=l;for(l++;;){var O=t.indexOf(s,O+1);if(-1===O)return d||x.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:k.length,index:l}),h();if(O===b-1){var D=t.substring(l,O).replace(T,s);return h(D)}if(t[O+1]!==s){if(t[O+1]===e){S.push(t.substring(l,O).replace(T,s)),l=O+1+y,I=t.indexOf(e,l),R=t.indexOf(n,l);break}if(t.substr(O+1,m)===n){if(S.push(t.substring(l,O).replace(T,s)),p(O+1+m),I=t.indexOf(e,l),_&&(v(),u))return g();if(i&&k.length>=i)return g(!0);break}}else O++}}return h()},this.abort=function(){u=!0},this.getCharIndex=function(){return l}}function u(){var t=document.getElementsByTagName("script");return t.length?t[t.length-1].src:""}function c(){if(!C.WORKERS_SUPPORTED)return!1;if(!k&&null===C.SCRIPT_PATH)throw new Error("Script path cannot be determined automatically when Papa Parse is loaded asynchronously. You need to set Papa.SCRIPT_PATH manually.");var t=C.SCRIPT_PATH||y;t+=(-1!==t.indexOf("?")?"&":"?")+"papaworker";var e=new m.Worker(t);return e.onmessage=d,e.id=S++,x[e.id]=e,e}function d(t){var e=t.data,n=x[e.workerId],r=!1;if(e.error)n.userError(e.error,e.file);else if(e.results&&e.results.data){var o=function(){r=!0,f(e.workerId,{data:[],errors:[],meta:{aborted:!0}})},i={abort:o,pause:h,resume:h};if(b(n.userStep)){for(var a=0;a<e.results.data.length&&(n.userStep({data:[e.results.data[a]],errors:e.results.errors,meta:e.results.meta},i),!r);a++);delete e.results}else b(n.userChunk)&&(n.userChunk(e.results,i,e.file),delete e.results)}e.finished&&!r&&f(e.workerId,e.results)}function f(t,e){var n=x[t];b(n.userComplete)&&n.userComplete(e),n.terminate(),delete x[t]}function h(){throw"Not implemented."}function p(t){var e=t.data;if(void 0===C.WORKER_ID&&e&&(C.WORKER_ID=e.workerId),"string"==typeof e.input)m.postMessage({workerId:C.WORKER_ID,results:C.parse(e.input,e.config),finished:!0});else if(m.File&&e.input instanceof File||e.input instanceof Object){var n=C.parse(e.input,e.config);n&&m.postMessage({workerId:C.WORKER_ID,results:n,finished:!0})}}function g(t){if("object"!=typeof t)return t;var e=t instanceof Array?[]:{};for(var n in t)e[n]=g(t[n]);return e}function v(t,e){return function(){t.apply(e,arguments)}}function b(t){return"function"==typeof t}var y,m=function(){return"undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==m?m:{}}(),w=!m.document&&!!m.postMessage,_=w&&/(\?|&)papaworker(=|&|$)/.test(m.location.search),k=!1,x={},S=0,C={};if(C.parse=t,C.unparse=e,C.RECORD_SEP=String.fromCharCode(30),C.UNIT_SEP=String.fromCharCode(31),C.BYTE_ORDER_MARK="\ufeff",C.BAD_DELIMITERS=["\r","\n",'"',C.BYTE_ORDER_MARK],C.WORKERS_SUPPORTED=!w&&!!m.Worker,C.SCRIPT_PATH=null,C.LocalChunkSize=10485760,C.RemoteChunkSize=5242880,C.DefaultDelimiter=",",C.Parser=l,C.ParserHandle=s,C.NetworkStreamer=r,C.FileStreamer=o,C.StringStreamer=i,C.ReadableStreamStreamer=a,m.jQuery){var E=m.jQuery;E.fn.parse=function(t){function e(){if(0===i.length)return void(b(t.complete)&&t.complete());var e=i[0];if(b(t.before)){var o=t.before(e.file,e.inputElem);if("object"==typeof o){if("abort"===o.action)return void n("AbortError",e.file,e.inputElem,o.reason);if("skip"===o.action)return void r();"object"==typeof o.config&&(e.instanceConfig=E.extend(e.instanceConfig,o.config))}else if("skip"===o)return void r()}var a=e.instanceConfig.complete;e.instanceConfig.complete=function(t){b(a)&&a(t,e.file,e.inputElem),r()},C.parse(e.file,e.instanceConfig)}function n(e,n,r,o){b(t.error)&&t.error({name:e},n,r,o)}function r(){i.splice(0,1),e()}var o=t.config||{},i=[];return this.each(function(t){if("INPUT"!==E(this).prop("tagName").toUpperCase()||"file"!==E(this).attr("type").toLowerCase()||!m.FileReader||!this.files||0===this.files.length)return!0;for(var e=0;e<this.files.length;e++)i.push({file:this.files[e],inputElem:this,instanceConfig:E.extend({},o)})}),e(),this}}return _?m.onmessage=p:C.WORKERS_SUPPORTED&&(y=u(),document.body?document.addEventListener("DOMContentLoaded",function(){k=!0},!0):k=!0),r.prototype=Object.create(n.prototype),r.prototype.constructor=r,o.prototype=Object.create(n.prototype),o.prototype.constructor=o,i.prototype=Object.create(i.prototype),i.prototype.constructor=i,a.prototype=Object.create(n.prototype),a.prototype.constructor=a,C})}});