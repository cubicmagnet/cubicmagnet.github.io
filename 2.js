webpackJsonp([2,10],{4:function(t,e,n){"use strict";function r(t,e,n,r,i){var o=e.dimOf(t.idtype),y=r.dimOf(t.idtype);return Promise.all([e.ids(),r.ids()]).then(function(e){var r=e[0].dim(o),s=e[1].dim(y);return t.createBand(n,i,r,s,r.intersect(s),"block","rel-block")})}function i(t){return Array.isArray(t)?t:[t]}function o(t,e,r,o,y){function s(t){return t instanceof x.a?t.groups:[n.i(x.b)(t)]}var u=e.dimOf(t.idtype),a=o.dimOf(t.idtype);return Promise.all([e.ids(),o.ids()]).then(function(t){var r=s(t[0].dim(u)),i=s(t[1].dim(a)),y=r.map(function(t){var e=n.i(x.c)();return e.dims[u]=t,e}),p=i.map(function(t){var e=n.i(x.c)();return e.dims[a]=t,e});return Promise.all([Promise.resolve({groupa:r,groupb:i}),e.locateById.apply(e,y),o.locateById.apply(o,p)])}).then(function(e){function n(t){return function(e,n){return{g:e,len:e.length,loc:t[n]?t[n].aabb():null}}}var r=e[0].groupa.map(n(i(e[1]))),o=e[0].groupb.map(n(i(e[2]))),y=[];return r.forEach(function(e){o.forEach(function(n){var r=e.g.intersect(n.g),i=r.length;if(0!==i){var o=e.g.name+"-"+n.g.name;e.loc&&n.loc&&(y.push.apply(y,t.createBand(e.loc,n.loc,e.g,n.g,r,o,"rel-group")),e.loc.y+=e.loc.h*(i/e.len),n.loc.y+=n.loc.h*(i/n.len))}})}),y})}function y(t,e){var n=t.aabb(),r=e.aabb();return n.cx>r.cx?["w","e"]:["e","w"]}function s(t,e,r,o,s){function a(t,e,n){if(!n)return t.center;var r=y(t,e);return t.corner(r[0])}var p=e.dimOf(t.idtype),c=o.dimOf(t.idtype),h=e.data.dim.length>1,f=o.data.dim.length>1;return Promise.all([e.ids(),o.ids()]).then(function(t){var r=t[0].dim(p),i=t[1].dim(c),y=r.intersect(i),s=[],u=[];return y.forEach(function(t){var e=n.i(x.c)();e.dim(p).setList([t]),s.push(e),e=n.i(x.c)(),e.dim(c).setList([t]),u.push(e)}),Promise.all([Promise.resolve(y),e.locateById.apply(e,s),o.locateById.apply(o,u)])}).then(function(e){var r=e[0],o=i(e[1]),y=i(e[2]),s=[];t.line.interpolate("linear");var x=t.idtype.selections().dim(0);return r.forEach(function(e,r){var i=n.i(u.a)(o[r]),p=n.i(u.a)(y[r]);i&&p&&s.push({clazz:"rel-item"+(x.contains(e)?" phovea-select-selected":""),id:e,d:t.line([a(i,p,h),a(p,i,f)])})}),s})}Object.defineProperty(e,"__esModule",{value:!0});var u=n(79),x=n(52);e.createBlockRep=r,e.createGroupRep=o,e.createItemRep=s},52:function(t,e,n){"use strict";function r(t,e){return t<0?e+1+t:t}function i(t){return new P("unnamed","gray",t)}function o(t,e){return new O(t,e)}function y(t){if(1===t.length)return t[0];var e=t[0].iter().asList();return t.slice(1).forEach(function(t){t.iter().forEach(function(t){e.indexOf(t)<0&&e.push(t)})}),w.from(e)}function s(){return new E}function u(){var t=new E;return t.dims=[w.none(),w.none()],t}function x(){if(0===arguments.length)return s();var t=new E;return Array.isArray(arguments[0])&&n.i(m.e)(arguments).forEach(function(e,n){0!==e.length&&t.dim(n).setSlice(e[0],e[1],e[2])}),"number"==typeof arguments[0]&&t.dim(0).setSlice(arguments[0],arguments[1],arguments[2]),t}function a(){if(0===arguments.length)return s();var t=new E,e=arguments[0];return Array.isArray(e)||(e=n.i(m.e)(arguments)),t.dims=e.map(function(t){return t.dim(0)}),t}function p(){if(0===arguments.length)return s();var t=new E;return Array.isArray(arguments[0])&&arguments[0][0]instanceof w?t.dims=arguments[0]:Array.isArray(arguments[0])?n.i(m.e)(arguments).forEach(function(e,n){e instanceof w?t.dims[n]=e:t.dim(n).setList(e)}):"number"==typeof arguments[0]?t.dim(0).setList(n.i(m.e)(arguments)):arguments[0]instanceof w&&(t.dims=n.i(m.e)(arguments)),t}function c(t){var e,n,r=0,i=new Array;for(t=t.trim();r<t.length;)switch(e=t.charAt(r)){case'"':n=h(t,r),r=n.act+1,i.push(n.dim);break;case",":r++,i.push(w.all());break;default:e.match(/\s/)?r++:(n=f(t,r),r=n.act+1,i.push(n.dim))}return","===t.charAt(t.length-1)&&i.push(w.all()),new E(i)}function h(t,e){e+=1;var n,r=t.indexOf('"',e),i=t.slice(e,r);switch(e=r+1,t.charAt(e)){case'"':return r=t.indexOf('"',e+1),n=f(t,r+1),{dim:new P(i,t.slice(e+1,r),n.dim),act:n.act};case"{":for(var o=[];"}"!==t.charAt(e);)n=h(t,e+1),o.push(n.dim),e=n.act;return{dim:new O(i,o),act:n.act+1};default:return{dim:w.all(),act:e}}}function f(t,e){var n,r=new w;switch(t.charAt(e)){case",":case"}":n=e,r=w.all();break;case"(":n=t.indexOf(")",e),n>e+1&&r.push.apply(r,t.slice(e+1,n).split(",").map(v.parse)),n+=1;break;default:n=t.indexOf("}",e);var i=t.indexOf(",",e);n>=0&&i>=0?n=Math.min(n,i):n<0&&(n=i),n<0&&(n=t.length),r=new w([v.parse(t.slice(e,n))])}return{act:n,dim:r}}function l(t){return void 0===t&&(t=null),null===t?s():t instanceof E?t:Array.isArray(t)?Array.isArray(t[0])?p.apply(void 0,t):p(t):c(n.i(m.e)(arguments).map(String).join(","))}var d=n(9),m=n(10),g=n(60);n.d(e,"h",function(){return w}),n.d(e,"j",function(){return P}),e.b=i,e.k=o,n.d(e,"a",function(){return O}),n.d(e,"g",function(){return E}),e.c=s,e.e=u,e.l=x,e.i=a,e.d=p,e.f=l;var v=function(){function t(t,e,n){void 0===e&&(e=-1),void 0===n&&(n=1),this.from=t,this.to=e,this.step=n}return Object.defineProperty(t.prototype,"isAll",{get:function(){return 0===this.from&&-1===this.to&&1===this.step},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isSingle",{get:function(){return this.from+this.step===this.to},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isUnbound",{get:function(){return this.from<0||this.to<0},enumerable:!0,configurable:!0}),t.all=function(){return new t(0,-1,1)},t.none=function(){return new t(0,0,1)},t.single=function(t){return new b(t)},t.range=function(e,n,r){return void 0===n&&(n=-1),void 0===r&&(r=1),e+r===n?t.single(e):new t(e,n,r)},t.prototype.size=function(t){var e=r(this.to,t),n=r(this.from,t);if(1===this.step)return Math.max(e-n,0);if(-1===this.step)return Math.max(n-e,0);var i=this.step>0?e-n+1:n-e+1,o=Math.abs(this.step);return i<=0?0:Math.floor(i/o)},t.prototype.clone=function(){return new t(this.from,this.to,this.step)},t.prototype.reverse=function(){var e=this.from<0?this.from:this.from+1;return new t(this.to<0?this.to:this.to-1,e,-this.step)},t.prototype.invert=function(t,e){return this.isAll?t:r(this.from,e)+t*this.step},t.prototype.iter=function(t){return n.i(g.a)(r(this.from,t),r(this.to,t),this.step)},Object.defineProperty(t.prototype,"__iterator__",{get:function(){return this.iter()},enumerable:!0,configurable:!0}),t.prototype.contains=function(t,e){var n=r(this.from,e),i=r(this.to,e);return-1===this.step?t<=n&&t>i:t>=n&&t<i},t.prototype.toString=function(){if(this.isAll)return"";if(this.isSingle)return this.from.toString();var t=this.from+":"+this.to;return 1!==this.step&&(t+=":"+this.step),t},t.parse=function(e){if(0===e.length)return t.all();var n=e.split(":");return 1===n.length?t.single(parseFloat(n[0])):2===n.length?new t(parseFloat(n[0]),parseFloat(n[1])):new t(parseFloat(n[0]),parseFloat(n[1]),parseFloat(n[2]))},t}(),b=function(){function t(t){this.from=t}return Object.defineProperty(t.prototype,"step",{get:function(){return 1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"to",{get:function(){return this.from+1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isAll",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isSingle",{get:function(){return!0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isUnbound",{get:function(){return!1},enumerable:!0,configurable:!0}),t.prototype.size=function(t){return 1},t.prototype.clone=function(){return new t(this.from)},t.prototype.contains=function(t,e){return r(this.from,e)===t},t.prototype.reverse=function(){return this.clone()},t.prototype.invert=function(t,e){return r(this.from,e)+t},t.prototype.iter=function(t){return n.i(g.b)(r(this.from,t))},Object.defineProperty(t.prototype,"__iterator__",{get:function(){return this.iter()},enumerable:!0,configurable:!0}),t.prototype.toString=function(){return this.from.toString()},t}(),w=function(){function t(e){e instanceof t?this.arr=e.arr:Array.isArray(e)?this.arr=e:this.arr=[]}return Object.defineProperty(t.prototype,"length",{get:function(){return this.size()},enumerable:!0,configurable:!0}),t.all=function(){return new t([v.all()])},t.single=function(e){return new t([v.single(e)])},t.none=function(){return new t},t.from=function(e){return new t(t.compress(e))},t.compress=function(t){if(0===t.length)return[];if(1===t.length)return[v.single(t[0])];for(var e=new Array,n=t.slice(1).map(function(e,n){return e-t[n]}),r=0,i=1,o=0;i<t.length;){for(;n[r]===n[i-1]&&i<t.length;)i++;if(i===r+1)e.push(v.single(t[r]));else if(1===Math.abs(n[r]))e.push(v.range(t[r],t[i-1]+n[r],n[r]));else for(o=r;o<i;o++)e.push(v.single(t[o]));r=i,i+=1}for(;r<t.length;)e.push(v.single(t[r++]));return e},Object.defineProperty(t.prototype,"isAll",{get:function(){return 1===this.arr.length&&this.at(0).isAll},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isNone",{get:function(){return 0===this.arr.length},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isUnbound",{get:function(){return this.arr.some(function(t){return t.isUnbound})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isList",{get:function(){return this.arr.every(function(t){return t.isSingle})},enumerable:!0,configurable:!0}),t.prototype.push=function(){function t(t){return"string"==typeof t?v.parse(t.toString()):"number"==typeof t?v.single(t):Array.isArray(t)?new v(t[0],t[1],t[2]):t}for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return this.arr.push.apply(this.arr,e.map(t))},t.prototype.pushSlice=function(t,e,n){void 0===e&&(e=-1),void 0===n&&(n=1),this.arr.push(new v(t,e,n))},t.prototype.pushList=function(e){this.arr.push.apply(this.arr,t.compress(e))},t.prototype.setSlice=function(t,e,n){void 0===e&&(e=-1),void 0===n&&(n=1),this.arr.length=0,this.pushSlice(t,e,n)},t.prototype.setList=function(t){this.arr.length=0,this.pushList(t)},t.prototype.at=function(t){return t<0&&(t+=this.length),t<0||t>=this.arr.length?v.none():this.arr[t]},t.prototype.size=function(t){return this.arr.map(function(e){return e.size(t)}).reduce(function(t,e){return t+e},0)},Object.defineProperty(t.prototype,"isIdentityRange",{get:function(){return 1===this.arr.length&&0===this.arr[0].from&&1===this.arr[0].step},enumerable:!0,configurable:!0}),t.prototype.repeat=function(e){if(void 0===e&&(e=1),1===e)return this;for(var n=this.arr.slice(),r=1;r<e;++r)n.push.apply(n,this.arr);return new t(n)},t.prototype.preMultiply=function(e,n){if(this.isAll)return e.clone();if(e.isAll)return this.clone();if(e.isNone||this.isNone)return t.none();if(this.isIdentityRange)return e.clone();var r=this.iter(n).asList(),i=function(t){var e=t.iter(r.length),n=[];return e.forEach(function(t){t>=0&&t<r.length&&n.push(r[t])}),t.fromLike(n)};return e instanceof O?o(e.name,e.groups.map(i)):i(e)},t.prototype.union=function(t,e){if(this.isAll||t.isNone)return this.clone();if(t.isAll||this.isNone)return t.clone();var n=this.iter(e).asList();return t.iter(e).forEach(function(t){n.indexOf(t)<0&&n.push(t)}),t.fromLike(n.sort())},t.prototype.intersect=function(e,n){if(this.isNone||e.isNone)return t.none();if(this.isAll)return e.clone();if(e.isAll)return this.clone();var r=this.iter(n).asList(),i=e.iter(n),o=[];return i.forEach(function(t){r.indexOf(t)>=0&&o.push(t)}),e.fromLike(o.sort())},t.prototype.toSet=function(t){return this.removeDuplicates(t)},t.prototype.without=function(e,n){if(this.isNone||e.isNone)return this.clone();if(e.isAll)return t.none();var r=this.iter(n),i=e.iter(n).asList(),o=[];return r.forEach(function(t){i.indexOf(t)<0&&o.push(t)}),t.from(o.sort())},t.prototype.clone=function(){return new t(this.arr.map(function(t){return t.clone()}))},t.prototype.invert=function(t,e){if(this.isAll)return t;if(this.isNone)return-1;for(var n=0,r=this.arr[0].size(e),i=r;i>t&&n<this.length;)n++,r=this.arr[n].size(e),i+=r;return n>=this.arr.length?-1:this.arr[n-1].invert(t-i+r,e)},t.prototype.indexOf=function(){if(arguments[0]instanceof E)return this.indexRangeOf(arguments[0],arguments[1]);var t,e=this.iter().asList();if(1===arguments.length){if("number"==typeof arguments[0])return e.indexOf(arguments[0]);t=arguments[0]}else t=n.i(m.e)(arguments);return 0===t.length?[]:t.map(function(t,n){return e.indexOf(t)})},t.prototype.indexRangeOf=function(e,n){if(e.isNone||this.isNone)return e.fromLike([]);if(e.isAll)return t.all();var r;if(this.isIdentityRange){var i=this.arr[0].to;r=function(t,e){t>=0&&t<i&&e.push(t)}}else{var y=this.iter().asList();r=function(t,e){var n=y.indexOf(t);n>=0&&e.push(n)}}if(e instanceof O)return o(e.name,e.groups.map(function(t){var e=[];return t.forEach(function(t){return r(t,e)}),t.fromLike(e)}));var s=[];return e.forEach(function(t){return r(t,s)}),e.fromLike(s)},t.prototype.filter=function(t,e,n){if(void 0===n&&(n=m.f),this.isAll)return t.map(n);var r=this.iter(e);if(r.byOne&&r instanceof g.c)return t.slice(r.from,r.to).map(n);for(var i=[];r.hasNext();)i.push(n(t[r.next()]));return i},t.prototype.iter=function(t){if(this.isList)return n.i(g.d)(this.arr.map(function(t){return t.from}));var e=this.arr.map(function(e){return e.iter(t)});return g.e.apply(null,e)},Object.defineProperty(t.prototype,"__iterator__",{get:function(){return this.iter()},enumerable:!0,configurable:!0}),t.prototype.asList=function(t){return this.iter(t).asList()},Object.defineProperty(t.prototype,"first",{get:function(){return this.isNone?null:this.arr[0].from},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"last",{get:function(){return this.isNone?null:this.arr[this.arr.length-1].from},enumerable:!0,configurable:!0}),t.prototype.forEach=function(t,e){return this.iter().forEach(t,e)},t.prototype.contains=function(t,e){return this.arr.some(function(n){return n.contains(t,e)})},t.prototype.sort=function(t){void 0===t&&(t=function(t,e){return t-e});var e=this.iter().asList(),n=e.sort(t);return this.fromLike(n)},t.prototype.removeDuplicates=function(e){var n=this.iter().asList();return n=n.sort(),n=n.filter(function(t,e){return t!==n[e-1]}),t.from(n)},t.prototype.reverse=function(){var e=this.arr.map(function(t){return t.reverse()});return e.reverse(),new t(e)},t.prototype.toString=function(){return this.isAll?"":1===this.length?this.arr[0].toString():"("+this.arr.join(",")+")"},t.prototype.eq=function(t){return!!(this===t||this.isAll&&t.isAll||this.isNone&&t.isNone)||this.toString()===t.toString()},t.prototype.fromLike=function(e){return t.from(e)},t}(),P=function(t){function e(e,n,r){var i=t.call(this,r)||this;return i.name=e,i.color=n,i}return d.a(e,t),e.prototype.preMultiply=function(n,r){var i=t.prototype.preMultiply.call(this,n,r);return new e(this.name,this.color,i)},e.prototype.union=function(n,r){var i=t.prototype.union.call(this,n,r);return new e(this.name,this.color,i)},e.prototype.intersect=function(n,r){var i=t.prototype.intersect.call(this,n,r);return new e(this.name,this.color,i)},e.prototype.without=function(n,r){var i=t.prototype.without.call(this,n,r);return new e(this.name,this.color,i)},e.prototype.clone=function(){return new e(this.name,this.color,t.prototype.clone.call(this))},e.prototype.toString=function(){return'"'+this.name+'""'+this.color+'"'+t.prototype.toString.call(this)},e.prototype.toSet=function(n){return new e(this.name,this.color,t.prototype.toSet.call(this,n))},e.prototype.fromLike=function(n){return new e(this.name,this.color,t.prototype.fromLike.call(this,n))},e}(w),O=function(t){function e(e,n,r){var i=t.call(this,r||y(n))||this;return i.name=e,i.groups=n,i}return d.a(e,t),e.prototype.preMultiply=function(n,r){var i=this.groups.length>1?t.prototype.preMultiply.call(this,n,r):void 0;return new e(this.name,this.groups.map(function(t){return t.preMultiply(n,r)}),i)},e.prototype.union=function(n,r){var i=this.groups.length>1?t.prototype.union.call(this,n,r):void 0;return new e(this.name,this.groups.map(function(t){return t.union(n,r)}),i)},e.prototype.intersect=function(n,r){var i=this.groups.length>1?t.prototype.intersect.call(this,n,r):void 0;return new e(this.name,this.groups.map(function(t){return t.intersect(n,r)}),i)},e.prototype.without=function(n,r){var i=this.groups.length>1?t.prototype.without.call(this,n,r):void 0;return new e(this.name,this.groups.map(function(t){return t.without(n,r)}),i)},e.prototype.clone=function(){var n=this.groups.length>1?t.prototype.clone.call(this):void 0;return new e(name,this.groups.map(function(t){return t.clone()}),n)},e.prototype.sort=function(n){var r=this.groups.length>1?t.prototype.sort.call(this,n):void 0;return new e(this.name,this.groups.map(function(t){return t.sort(n)}),r)},e.prototype.toSet=function(n){var r=this.groups.length>1?t.prototype.toSet.call(this,n):void 0;return new e(this.name,this.groups.map(function(t){return t.toSet(n)}),r)},e.prototype.toString=function(){return'"'+this.name+'"{'+this.groups.join(",")+"}"},e}(w),E=function(){function t(t){void 0===t&&(t=new Array),this.dims=t}return Object.defineProperty(t.prototype,"isAll",{get:function(){return this.dims.every(function(t){return t.isAll})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isNone",{get:function(){return this.dims.every(function(t){return t.isNone})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isUnbound",{get:function(){return this.dims.some(function(t){return t.isUnbound})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"first",{get:function(){return this.dim(0).first},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"last",{get:function(){return this.dim(0).last},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ndim",{get:function(){return this.dims.length},enumerable:!0,configurable:!0}),t.prototype.eq=function(t){return!!(this===t||this.isAll&&t.isAll||this.isNone&&t.isNone)||this.toString()===t.toString()},t.prototype.preMultiply=function(e,n){if(this.isAll)return e.clone();if(e.isAll)return this.clone();var r=new t;return this.dims.forEach(function(t,i){r.dims[i]=t.preMultiply(e.dim(i),n?n[i]:void 0)}),r},t.prototype.union=function(e,n){if(this.isAll||e.isNone)return this.clone();if(e.isAll||this.isNone)return e.clone();var r=new t;return this.dims.forEach(function(t,i){r.dims[i]=t.union(e.dim(i),n?n[i]:void 0)}),r},t.prototype.intersect=function(e,n){if(this.isNone||e.isNone)return u();if(this.isAll)return e.clone();if(e.isAll)return this.clone();var r=new t;return this.dims.forEach(function(t,i){r.dims[i]=t.intersect(e.dim(i),n?n[i]:void 0)}),r},t.prototype.without=function(e,n){if(this.isNone||e.isNone)return this.clone();if(e.isAll)return u();var r=new t;return this.dims.forEach(function(t,i){r.dims[i]=t.without(e.dim(i),n?n[i]:void 0)}),r},t.prototype.clone=function(){var e=new t;return this.dims.forEach(function(t,n){e.dims[n]=t.clone()}),e},t.prototype.swap=function(){var e=new t;return e.dims=this.dims.map(function(t){return t.clone()}).reverse(),e},t.prototype.filter=function(t,e){function n(t){if(t>=r)return m.f;var o=i.dim(t),y=n(t+1),s=e?e[t]:void 0;return function(t){return Array.isArray(t)?o.filter(t,s,y):t}}if(this.isAll)return t;var r=this.ndim,i=this;return n(0)(t)},t.prototype.dim=function(t){var e=this.dims[t];return e||(this.dims[t]=w.all(),this.dims[t])},t.prototype.invert=function(t,e){var n=this;return this.isAll?t:t.map(function(t,r){return n.dim(r).invert(t,e?e[r]:void 0)})},t.prototype.indexRangeOf=function(e,n){return e.isNone||this.isNone?u():this.isNone||e.isAll?this.clone():new t(this.dims.map(function(t,r){return t.indexRangeOf(e.dim(r),n?n[r]:void 0)}))},t.prototype.indexOf=function(){var e=this;if(arguments[0]instanceof t)return this.indexRangeOf(arguments[0],arguments[1]);var r;if(1===arguments.length){if("number"==typeof arguments[0])return this.dim(0).indexOf(arguments[0]);r=arguments[0]}else r=n.i(m.e)(arguments);return 0===r.length?[]:r.map(function(t,n){return e.dim(n).indexOf(t)})},t.prototype.size=function(t){return this.isAll?t:this.dims.map(function(e,n){return e.size(t?t[n]:void 0)})},t.prototype.split=function(){return this.dims.map(function(e){return new t([e])})},t.prototype.product=function(t,e){var n=this,r=this.ndim,i=function(o){var y=o.length;if(y<r){n.dims[y].iter(e?e[y]:null).forEach(function(t){o.push(t),i(o),o.pop()})}else t(o.slice())};i([])},t.prototype.toString=function(){return this.dims.map(function(t){return t.toString()}).join(",")},t}()},60:function(t,e,n){"use strict";function r(){return new f}function i(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return 0===t.length?r():1===t.length?t[0]:new h(t)}function o(t,e,n){return new a(t,e,n)}function y(t){return new c(t)}function s(t){return new p(t)}var u=n(9);n.d(e,"c",function(){return a}),e.e=i,e.a=o,e.b=y,e.d=s;var x=function(){function t(){}return t.prototype.hasNext=function(){return!1},t.prototype.next=function(){return null},t.prototype.forEach=function(t,e){for(var n=0;this.hasNext();)t.call(e,this.next(),n++)},t.prototype.map=function(t,e){return new l(this,t,e)},t.prototype.asList=function(){for(var t=[];this.hasNext();)t.push(this.next());return t},Object.defineProperty(t.prototype,"isIncreasing",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isDecreasing",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"byOne",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"byMinusOne",{get:function(){return!1},enumerable:!0,configurable:!0}),t}(),a=function(t){function e(e,n,r){var i=t.call(this)||this;return i.from=e,i.to=n,i.step=r,i.act=i.from,i}return u.a(e,t),e.prototype.hasNext=function(){return this.act!==this.to&&(this.step>0&&this.act<this.to||this.step<0&&this.act>this.to)},e.prototype.next=function(){if(!this.hasNext())throw new RangeError("end of iterator");var t=this.act;return this.act+=this.step,this.step<0&&this.act<this.to?this.act=this.to:this.step>0&&this.act>this.to&&(this.act=this.to),t},Object.defineProperty(e.prototype,"isIncreasing",{get:function(){return this.step>0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isDecreasing",{get:function(){return this.step<0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"byOne",{get:function(){return 1===this.step},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"byMinusOne",{get:function(){return-1===this.step},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){if(this.byOne)return Math.max(this.to-this.from,0);if(this.byMinusOne)return Math.max(this.from-this.to,0);var t=this.isIncreasing?this.to-this.from+1:this.from-this.to+1,e=Math.abs(this.step);return t<=0?0:Math.floor(t/e)},enumerable:!0,configurable:!0}),e}(x),p=function(t){function e(e){var n=t.call(this)||this;return n.arr=e,n.it=new a(0,e.length,1),n}return u.a(e,t),e.prototype.hasNext=function(){return this.it.hasNext()},e.prototype.next=function(){if(!this.hasNext())throw new RangeError("end of iterator");return this.arr[this.it.next()]},e.prototype.asList=function(){return this.arr.slice()},e}(x),c=function(t){function e(e){var n=t.call(this)||this;return n.value=e,n.delivered=!1,n}return u.a(e,t),e.prototype.hasNext=function(){return!this.delivered},e.prototype.next=function(){if(!this.hasNext())throw new RangeError("end of iterator");return this.delivered=!0,this.value},e.prototype.asList=function(){return[this.value]},Object.defineProperty(e.prototype,"isIncreasing",{get:function(){return!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isDecreasing",{get:function(){return!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"byOne",{get:function(){return!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"byMinusOne",{get:function(){return!0},enumerable:!0,configurable:!0}),e}(x),h=function(t){function e(e){var n=t.call(this)||this;return n.its=e,n.act=e.shift(),n}return u.a(e,t),e.prototype.hasNext=function(){for(var t=!1;!(t=this.act.hasNext())&&this.its.length>0;)this.act=this.its.shift();return t},e.prototype.next=function(){if(!this.hasNext())throw new RangeError("end of iterator");return this.act.next()},e.prototype.asList=function(){for(var t=[];this.hasNext();)t.push(this.next());return t},Object.defineProperty(e.prototype,"isIncreasing",{get:function(){return this.its.every(function(t){return t.isIncreasing})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isDecreasing",{get:function(){return this.its.every(function(t){return t.isDecreasing})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"byOne",{get:function(){return this.its.every(function(t){return t.byOne})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"byMinusOne",{get:function(){return this.its.every(function(t){return t.byMinusOne})},enumerable:!0,configurable:!0}),e}(x),f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isIncreasing=!1,e.isDecreasing=!1,e.byOne=!1,e.byMinusOne=!1,e}return u.a(e,t),e.prototype.hasNext=function(){return!1},e.prototype.next=function(){throw new RangeError("end of iterator")},e.prototype.asList=function(){return[]},e}(x),l=function(t){function e(e,n,r){var i=t.call(this)||this;return i.it=e,i.f=n,i.thisArg=r,i}return u.a(e,t),e.prototype.hasNext=function(){return this.it.hasNext()},e.prototype.next=function(){if(!this.hasNext())throw new RangeError("end of iterator");return this.f.call(this.thisArg,this.it.next())},Object.defineProperty(e.prototype,"isIncreasing",{get:function(){return this.it.isIncreasing},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isDecreasing",{get:function(){return this.it.isDecreasing},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"byOne",{get:function(){return this.it.byOne},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"byMinusOne",{get:function(){return this.it.byMinusOne},enumerable:!0,configurable:!0}),e}(x)},77:function(t,e,n){"use strict";var r=n(9);n.d(e,"b",function(){return o}),n.d(e,"a",function(){return y});var i=function(){function t(t,e){this.name=t,this.params=e}return t}(),o=function(){function t(t){void 0===t&&(t="No Intersection"),this.status=t,this.points=[]}return Object.defineProperty(t.prototype,"intersects",{get:function(){return"Intersection"===this.status},enumerable:!0,configurable:!0}),t.prototype.appendPoint=function(t){this.status="Intersection",this.points.push(t)},t.prototype.appendPoints=function(t){t.length>0&&(this.status="Intersection"),this.points.push.apply(this.points,t)},Object.defineProperty(t.prototype,"length",{get:function(){return this.points.length},enumerable:!0,configurable:!0}),t.prototype.forEach=function(t,e){this.points.forEach(t,e)},t.prototype.map=function(t,e){return this.points.map(t,e)},t.intersectShapes=function(e,n){var r,i=e.asIntersectionParams(),o=n.asIntersectionParams();if(null!=i&&null!=o)if(e instanceof x)r=t.intersectPathShape(e,n);else if(n instanceof x)r=t.intersectPathShape(n,e);else{var y,s;if(i.name<o.name?(y="intersect"+i.name+o.name,s=i.params.concat(o.params)):(y="intersect"+o.name+i.name,s=o.params.concat(i.params)),"function"!=typeof t[y])throw new Error("Intersection not available: "+y);r=t[y].apply(null,s)}else r=new t;return r},t.intersectPathShape=function(t,e){return t.intersectShape(e)},t.intersectBezier2Bezier2=function(e,n,r,i,o,u){var x,a,p,c,h,f,l,d,m=1e-4,g=new t;x=n.multiply(-2),p=e.add(x.add(r)),x=e.multiply(-2),a=n.multiply(2),c=x.add(a),h=new y(e.x,e.y),x=o.multiply(-2),f=i.add(x.add(u)),x=i.multiply(-2),a=o.multiply(2),l=x.add(a),d=new y(i.x,i.y),x=p.x*c.y-c.x*p.y,a=f.x*c.y-c.x*f.y;for(var v=l.x*c.y-c.x*l.y,b=c.x*(h.y-d.y)+c.y*(-h.x+d.x),w=f.x*p.y-p.x*f.y,P=l.x*p.y-p.x*l.y,O=p.x*(h.y-d.y)+p.y*(-h.x+d.x),E=new s(-w*w,-2*w*P,x*a-P*P-2*w*O,x*v-2*P*O,x*b-O*O),A=E.getRoots(),M=0;M<A.length;M++){var L=A[M];if(0<=L&&L<=1){var I=new s(-p.x,-c.x,-h.x+d.x+L*l.x+L*L*f.x).getRoots(),N=new s(-p.y,-c.y,-h.y+d.y+L*l.y+L*L*f.y).getRoots();if(I.length>0&&N.length>0)t:for(var j=0;j<I.length;j++){var R=I[j];if(0<=R&&R<=1)for(var S=0;S<N.length;S++)if(Math.abs(R-N[S])<m){g.points.push(f.multiply(L*L).add(l.multiply(L).add(d)));break t}}}}return g},t.intersectBezier2Bezier3=function(e,n,r,i,o,u,x){var a,p,c,h,f,l,d,m,g,v,b,w=new t;a=n.multiply(-2),f=e.add(a.add(r)),a=e.multiply(-2),p=n.multiply(2),l=a.add(p),d=new y(e.x,e.y),a=i.multiply(-1),p=o.multiply(3),c=u.multiply(-3),h=a.add(p.add(c.add(x))),m=new y(h.x,h.y),a=i.multiply(3),p=o.multiply(-6),c=u.multiply(3),h=a.add(p.add(c)),g=new y(h.x,h.y),a=i.multiply(-3),p=o.multiply(3),c=a.add(p),v=new y(c.x,c.y),b=new y(i.x,i.y);for(var P=d.x*d.x,O=d.y*d.y,E=l.x*l.x,A=l.y*l.y,M=f.x*f.x,L=f.y*f.y,I=b.x*b.x,N=b.y*b.y,j=v.x*v.x,R=v.y*v.y,S=g.x*g.x,C=g.y*g.y,z=m.x*m.x,B=m.y*m.y,k=new s(-2*f.x*f.y*m.x*m.y+M*B+L*z,-2*f.x*f.y*g.x*m.y-2*f.x*f.y*g.y*m.x+2*L*g.x*m.x+2*M*g.y*m.y,-2*f.x*v.x*f.y*m.y-2*f.x*f.y*v.y*m.x-2*f.x*f.y*g.x*g.y+2*v.x*L*m.x+L*S+M*(2*v.y*m.y+C),2*d.x*f.x*f.y*m.y+2*d.y*f.x*f.y*m.x+l.x*l.y*f.x*m.y+l.x*l.y*f.y*m.x-2*b.x*f.x*f.y*m.y-2*f.x*b.y*f.y*m.x-2*f.x*v.x*f.y*g.y-2*f.x*f.y*v.y*g.x-2*d.x*L*m.x-2*d.y*M*m.y+2*b.x*L*m.x+2*v.x*L*g.x-A*f.x*m.x-E*f.y*m.y+M*(2*b.y*m.y+2*v.y*g.y),2*d.x*f.x*f.y*g.y+2*d.y*f.x*f.y*g.x+l.x*l.y*f.x*g.y+l.x*l.y*f.y*g.x-2*b.x*f.x*f.y*g.y-2*f.x*b.y*f.y*g.x-2*f.x*v.x*f.y*v.y-2*d.x*L*g.x-2*d.y*M*g.y+2*b.x*L*g.x-A*f.x*g.x-E*f.y*g.y+j*L+M*(2*b.y*g.y+R),2*d.x*f.x*f.y*v.y+2*d.y*f.x*v.x*f.y+l.x*l.y*f.x*v.y+l.x*l.y*v.x*f.y-2*b.x*f.x*f.y*v.y-2*f.x*b.y*v.x*f.y-2*d.x*v.x*L-2*d.y*M*v.y+2*b.x*v.x*L-A*f.x*v.x-E*f.y*v.y+2*M*b.y*v.y,-2*d.x*d.y*f.x*f.y-d.x*l.x*l.y*f.y-d.y*l.x*l.y*f.x+2*d.x*f.x*b.y*f.y+2*d.y*b.x*f.x*f.y+l.x*b.x*l.y*f.y+l.x*l.y*f.x*b.y-2*b.x*f.x*b.y*f.y-2*d.x*b.x*L+d.x*A*f.x+d.y*E*f.y-2*d.y*M*b.y-b.x*A*f.x-E*b.y*f.y+P*L+O*M+I*L+M*N),q=k.getRootsInInterval(0,1),D=0;D<q.length;D++){var F=q[D],T=new s(f.x,l.x,d.x-b.x-F*v.x-F*F*g.x-F*F*F*m.x).getRoots(),_=new s(f.y,l.y,d.y-b.y-F*v.y-F*F*g.y-F*F*F*m.y).getRoots();if(T.length>0&&_.length>0){t:for(var Y=0;Y<T.length;Y++){var U=T[Y];if(0<=U&&U<=1)for(var X=0;X<_.length;X++)if(Math.abs(U-_[X])<1e-4){w.points.push(m.multiply(F*F*F).add(g.multiply(F*F).add(v.multiply(F).add(b))));break t}}}}return w},t.intersectBezier2Circle=function(e,n,r,i,o){return t.intersectBezier2Ellipse(e,n,r,i,o,o)},t.intersectBezier2Ellipse=function(e,n,r,i,o,u){var x,a,p,c,h,f=new t;x=n.multiply(-2),p=e.add(x.add(r)),x=e.multiply(-2),a=n.multiply(2),c=x.add(a),h=new y(e.x,e.y);for(var l=o*o,d=u*u,m=new s(d*p.x*p.x+l*p.y*p.y,2*(d*p.x*c.x+l*p.y*c.y),d*(2*p.x*h.x+c.x*c.x)+l*(2*p.y*h.y+c.y*c.y)-2*(d*i.x*p.x+l*i.y*p.y),2*(d*c.x*(h.x-i.x)+l*c.y*(h.y-i.y)),d*(h.x*h.x+i.x*i.x)+l*(h.y*h.y+i.y*i.y)-2*(d*i.x*h.x+l*i.y*h.y)-l*d).getRoots(),g=0;g<m.length;g++){var v=m[g];0<=v&&v<=1&&f.points.push(p.multiply(v*v).add(c.multiply(v).add(h)))}return f},t.intersectBezier2Line=function(e,n,r,i,o){var u,x,a,p,c,h,f,l=i.min(o),d=i.max(o),m=new t;u=n.multiply(-2),a=e.add(u.add(r)),u=e.multiply(-2),x=n.multiply(2),p=u.add(x),c=new y(e.x,e.y),f=new y(i.y-o.y,o.x-i.x),h=i.x*o.y-o.x*i.y;for(var g=new s(f.dot(a),f.dot(p),f.dot(c)+h).getRoots(),v=0;v<g.length;v++){var b=g[v];if(0<=b&&b<=1){var w=e.lerp(n,b),P=n.lerp(r,b),O=w.lerp(P,b);i.x===o.x?l.y<=O.y&&O.y<=d.y&&m.appendPoint(O):i.y===o.y?l.x<=O.x&&O.x<=d.x&&m.appendPoint(O):O.gte(l)&&O.lte(d)&&m.appendPoint(O)}}return m},t.prototype.intersectBezier2Polygon=function(e,n,r,i){for(var o=new t,y=i.length,s=0;s<y;s++){var u=i[s],x=i[(s+1)%y],a=t.intersectBezier2Line(e,n,r,u,x);o.appendPoints(a.points)}return o},t.intersectBezier2Rectangle=function(e,n,r,i,o){var s=i.min(o),u=i.max(o),x=new y(u.x,s.y),a=new y(s.x,u.y),p=t.intersectBezier2Line(e,n,r,s,x),c=t.intersectBezier2Line(e,n,r,x,u),h=t.intersectBezier2Line(e,n,r,u,a),f=t.intersectBezier2Line(e,n,r,a,s),l=new t;return l.appendPoints(p.points),l.appendPoints(c.points),l.appendPoints(h.points),l.appendPoints(f.points),l},t.intersectBezier3Bezier3=function(e,n,r,i,o,u,x,a){var p,c,h,f,l,d,m,g,v,b,w,P,O=new t;p=e.multiply(-1),c=n.multiply(3),h=r.multiply(-3),f=p.add(c.add(h.add(i))),l=new y(f.x,f.y),p=e.multiply(3),c=n.multiply(-6),h=r.multiply(3),f=p.add(c.add(h)),d=new y(f.x,f.y),p=e.multiply(-3),c=n.multiply(3),h=p.add(c),m=new y(h.x,h.y),g=new y(e.x,e.y),p=o.multiply(-1),c=u.multiply(3),h=x.multiply(-3),f=p.add(c.add(h.add(a))),v=new y(f.x,f.y),p=o.multiply(3),c=u.multiply(-6),h=x.multiply(3),f=p.add(c.add(h)),b=new y(f.x,f.y),p=o.multiply(-3),c=u.multiply(3),h=p.add(c),w=new y(h.x,h.y),P=new y(o.x,o.y);for(var E=g.x*g.x,A=g.x*g.x*g.x,M=g.y*g.y,L=g.y*g.y*g.y,I=m.x*m.x,N=m.x*m.x*m.x,j=m.y*m.y,R=m.y*m.y*m.y,S=d.x*d.x,C=d.x*d.x*d.x,z=d.y*d.y,B=d.y*d.y*d.y,k=l.x*l.x,q=l.x*l.x*l.x,D=l.y*l.y,F=l.y*l.y*l.y,T=P.x*P.x,_=P.x*P.x*P.x,Y=P.y*P.y,U=P.y*P.y*P.y,X=w.x*w.x,Q=w.x*w.x*w.x,$=w.y*w.y,V=b.x*b.x,W=b.x*b.x*b.x,H=b.y*b.y,Z=v.x*v.x,G=v.x*v.x*v.x,J=v.y*v.y,K=v.y*v.y*v.y,tt=new s(-q*K+F*G-3*l.x*D*Z*v.y+3*k*l.y*v.x*J,-6*l.x*b.x*D*v.x*v.y+6*k*l.y*b.y*v.x*v.y+3*b.x*F*Z-3*q*b.y*J-3*l.x*D*b.y*Z+3*k*b.x*l.y*J,-6*w.x*l.x*D*v.x*v.y-6*l.x*b.x*D*b.y*v.x+6*k*b.x*l.y*b.y*v.y+3*w.x*F*Z+3*V*F*v.x+3*w.x*k*l.y*J-3*l.x*w.y*D*Z-3*l.x*V*D*v.y+k*l.y*v.x*(6*w.y*v.y+3*H)+q*(-w.y*J-2*H*v.y-v.y*(2*w.y*v.y+H)),m.x*d.y*l.x*l.y*v.x*v.y-m.y*d.x*l.x*l.y*v.x*v.y+6*w.x*b.x*F*v.x+3*m.x*d.x*l.x*l.y*J+6*g.x*l.x*D*v.x*v.y-3*m.x*d.x*D*v.x*v.y-3*m.y*d.y*l.x*l.y*Z-6*g.y*k*l.y*v.x*v.y-6*P.x*l.x*D*v.x*v.y+3*m.y*d.y*k*v.x*v.y-2*d.x*z*l.x*v.x*v.y-6*w.x*l.x*b.x*D*v.y-6*w.x*l.x*D*b.y*v.x-6*l.x*w.y*b.x*D*v.x+6*w.x*k*l.y*b.y*v.y+2*S*d.y*l.y*v.x*v.y+W*F-3*g.x*F*Z+3*g.y*q*J+3*P.x*F*Z+B*l.x*Z-C*l.y*J-3*g.x*k*l.y*J+3*g.y*l.x*D*Z-2*m.x*d.y*k*J+m.x*d.y*D*Z-m.y*d.x*k*J+2*m.y*d.x*D*Z+3*P.x*k*l.y*J-d.x*z*l.y*Z-3*P.y*l.x*D*Z+S*d.y*l.x*J-3*l.x*V*D*b.y+k*l.y*v.x*(6*P.y*v.y+6*w.y*b.y)+k*b.x*l.y*(6*w.y*v.y+3*H)+q*(-2*w.y*b.y*v.y-P.y*J-b.y*(2*w.y*v.y+H)-v.y*(2*P.y*v.y+2*w.y*b.y)),6*m.x*d.x*l.x*l.y*b.y*v.y+m.x*d.y*l.x*b.x*l.y*v.y+m.x*d.y*l.x*l.y*b.y*v.x-m.y*d.x*l.x*b.x*l.y*v.y-m.y*d.x*l.x*l.y*b.y*v.x-6*m.y*d.y*l.x*b.x*l.y*v.x-6*g.x*b.x*F*v.x+6*P.x*b.x*F*v.x+6*g.y*q*b.y*v.y+2*B*l.x*b.x*v.x-2*C*l.y*b.y*v.y+6*g.x*l.x*b.x*D*v.y+6*g.x*l.x*D*b.y*v.x+6*g.y*l.x*b.x*D*v.x-3*m.x*d.x*b.x*D*v.y-3*m.x*d.x*D*b.y*v.x+2*m.x*d.y*b.x*D*v.x+4*m.y*d.x*b.x*D*v.x-6*g.x*k*l.y*b.y*v.y-6*g.y*k*b.x*l.y*v.y-6*g.y*k*l.y*b.y*v.x-4*m.x*d.y*k*b.y*v.y-6*P.x*l.x*b.x*D*v.y-6*P.x*l.x*D*b.y*v.x-2*m.y*d.x*k*b.y*v.y+3*m.y*d.y*k*b.x*v.y+3*m.y*d.y*k*b.y*v.x-2*d.x*z*l.x*b.x*v.y-2*d.x*z*l.x*b.y*v.x-2*d.x*z*b.x*l.y*v.x-6*P.y*l.x*b.x*D*v.x-6*w.x*l.x*w.y*D*v.x-6*w.x*l.x*b.x*D*b.y+6*P.x*k*l.y*b.y*v.y+2*S*d.y*l.x*b.y*v.y+2*S*d.y*b.x*l.y*v.y+2*S*d.y*l.y*b.y*v.x+3*w.x*V*F+3*X*F*v.x-3*l.x*w.y*V*D-3*X*l.x*D*v.y+k*b.x*l.y*(6*P.y*v.y+6*w.y*b.y)+k*l.y*v.x*(6*P.y*b.y+3*$)+w.x*k*l.y*(6*w.y*v.y+3*H)+q*(-2*P.y*b.y*v.y-v.y*(2*P.y*b.y+$)-w.y*(2*w.y*v.y+H)-b.y*(2*P.y*v.y+2*w.y*b.y)),m.x*w.x*d.y*l.x*l.y*v.y+m.x*d.y*l.x*w.y*l.y*v.x+m.x*d.y*l.x*b.x*l.y*b.y-m.y*d.x*w.x*l.x*l.y*v.y-m.y*d.x*l.x*w.y*l.y*v.x-m.y*d.x*l.x*b.x*l.y*b.y-6*m.y*w.x*d.y*l.x*l.y*v.x-6*g.x*w.x*F*v.x+6*P.x*w.x*F*v.x+2*w.x*B*l.x*v.x+6*g.x*w.x*l.x*D*v.y+6*g.x*l.x*w.y*D*v.x+6*g.x*l.x*b.x*D*b.y+6*g.y*w.x*l.x*D*v.x-3*m.x*d.x*w.x*D*v.y-3*m.x*d.x*w.y*D*v.x-3*m.x*d.x*b.x*D*b.y+2*m.x*w.x*d.y*D*v.x+4*m.y*d.x*w.x*D*v.x-6*g.y*w.x*k*l.y*v.y-6*g.y*k*w.y*l.y*v.x-6*g.y*k*b.x*l.y*b.y-6*P.x*w.x*l.x*D*v.y-6*P.x*l.x*w.y*D*v.x-6*P.x*l.x*b.x*D*b.y+3*m.y*w.x*d.y*k*v.y-3*m.y*d.y*l.x*V*l.y+3*m.y*d.y*k*w.y*v.x+3*m.y*d.y*k*b.x*b.y-2*d.x*w.x*z*l.x*v.y-2*d.x*w.x*z*l.y*v.x-2*d.x*z*l.x*w.y*v.x-2*d.x*z*l.x*b.x*b.y-6*P.y*w.x*l.x*D*v.x-6*w.x*l.x*w.y*b.x*D+6*P.y*k*w.y*l.y*v.x+2*S*w.x*d.y*l.y*v.y+2*S*d.y*w.y*l.y*v.x+2*S*d.y*b.x*l.y*b.y-3*g.x*V*F+3*P.x*V*F+3*X*b.x*F+B*l.x*V+3*g.y*l.x*V*D+m.x*d.y*V*D+2*m.y*d.x*V*D-d.x*z*V*l.y-3*P.y*l.x*V*D-3*X*l.x*D*b.y+S*d.y*l.x*(2*w.y*v.y+H)+m.x*d.x*l.x*l.y*(6*w.y*v.y+3*H)+w.x*k*l.y*(6*P.y*v.y+6*w.y*b.y)+C*l.y*(-2*w.y*v.y-H)+g.y*q*(6*w.y*v.y+3*H)+m.y*d.x*k*(-2*w.y*v.y-H)+m.x*d.y*k*(-4*w.y*v.y-2*H)+g.x*k*l.y*(-6*w.y*v.y-3*H)+k*b.x*l.y*(6*P.y*b.y+3*$)+P.x*k*l.y*(6*w.y*v.y+3*H)+q*(-2*P.y*w.y*v.y-b.y*(2*P.y*b.y+$)-P.y*(2*w.y*v.y+H)-w.y*(2*P.y*v.y+2*w.y*b.y)),-g.x*m.x*d.y*l.x*l.y*v.y+g.x*m.y*d.x*l.x*l.y*v.y+6*g.x*m.y*d.y*l.x*l.y*v.x-6*g.y*m.x*d.x*l.x*l.y*v.y-g.y*m.x*d.y*l.x*l.y*v.x+g.y*m.y*d.x*l.x*l.y*v.x+m.x*m.y*d.x*d.y*l.x*v.y-m.x*m.y*d.x*d.y*l.y*v.x+m.x*P.x*d.y*l.x*l.y*v.y+m.x*P.y*d.y*l.x*l.y*v.x+m.x*w.x*d.y*l.x*l.y*b.y+m.x*d.y*l.x*w.y*b.x*l.y-P.x*m.y*d.x*l.x*l.y*v.y-6*P.x*m.y*d.y*l.x*l.y*v.x-m.y*d.x*P.y*l.x*l.y*v.x-m.y*d.x*w.x*l.x*l.y*b.y-m.y*d.x*l.x*w.y*b.x*l.y-6*m.y*w.x*d.y*l.x*b.x*l.y-6*g.x*P.x*F*v.x-6*g.x*w.x*b.x*F-2*g.x*B*l.x*v.x+6*P.x*w.x*b.x*F+2*P.x*B*l.x*v.x+2*w.x*B*l.x*b.x+2*g.y*C*l.y*v.y-6*g.x*g.y*l.x*D*v.x+3*g.x*m.x*d.x*D*v.y-2*g.x*m.x*d.y*D*v.x-4*g.x*m.y*d.x*D*v.x+3*g.y*m.x*d.x*D*v.x+6*g.x*g.y*k*l.y*v.y+6*g.x*P.x*l.x*D*v.y-3*g.x*m.y*d.y*k*v.y+2*g.x*d.x*z*l.x*v.y+2*g.x*d.x*z*l.y*v.x+6*g.x*P.y*l.x*D*v.x+6*g.x*w.x*l.x*D*b.y+6*g.x*l.x*w.y*b.x*D+4*g.y*m.x*d.y*k*v.y+6*g.y*P.x*l.x*D*v.x+2*g.y*m.y*d.x*k*v.y-3*g.y*m.y*d.y*k*v.x+2*g.y*d.x*z*l.x*v.x+6*g.y*w.x*l.x*b.x*D-3*m.x*P.x*d.x*D*v.y+2*m.x*P.x*d.y*D*v.x+m.x*m.y*z*l.x*v.x-3*m.x*d.x*P.y*D*v.x-3*m.x*d.x*w.x*D*b.y-3*m.x*d.x*w.y*b.x*D+2*m.x*w.x*d.y*b.x*D+4*P.x*m.y*d.x*D*v.x+4*m.y*d.x*w.x*b.x*D-2*g.x*S*d.y*l.y*v.y-6*g.y*P.x*k*l.y*v.y-6*g.y*P.y*k*l.y*v.x-6*g.y*w.x*k*l.y*b.y-2*g.y*S*d.y*l.x*v.y-2*g.y*S*d.y*l.y*v.x-6*g.y*k*w.y*b.x*l.y-m.x*m.y*S*l.y*v.y-2*m.x*j*l.x*l.y*v.x+3*P.x*m.y*d.y*k*v.y-2*P.x*d.x*z*l.x*v.y-2*P.x*d.x*z*l.y*v.x-6*P.x*P.y*l.x*D*v.x-6*P.x*w.x*l.x*D*b.y-6*P.x*l.x*w.y*b.x*D+3*m.y*P.y*d.y*k*v.x+3*m.y*w.x*d.y*k*b.y+3*m.y*d.y*k*w.y*b.x-2*d.x*P.y*z*l.x*v.x-2*d.x*w.x*z*l.x*b.y-2*d.x*w.x*z*b.x*l.y-2*d.x*z*l.x*w.y*b.x-6*P.y*w.x*l.x*b.x*D-j*d.x*d.y*l.x*v.x+2*P.x*S*d.y*l.y*v.y+6*P.y*k*w.y*b.x*l.y+2*I*m.y*l.x*l.y*v.y+I*d.x*d.y*l.y*v.y+2*S*P.y*d.y*l.y*v.x+2*S*w.x*d.y*l.y*b.y+2*S*d.y*w.y*b.x*l.y+Q*F+3*E*F*v.x-3*M*q*v.y+3*T*F*v.x+R*k*v.x-N*D*v.y-m.x*j*k*v.y+I*m.y*D*v.x-3*E*l.x*D*v.y+3*M*k*l.y*v.x-I*z*l.x*v.y+j*S*l.y*v.x-3*X*l.x*w.y*D-3*T*l.x*D*v.y+3*Y*k*l.y*v.x+m.x*d.x*l.x*l.y*(6*P.y*v.y+6*w.y*b.y)+C*l.y*(-2*P.y*v.y-2*w.y*b.y)+g.y*q*(6*P.y*v.y+6*w.y*b.y)+m.y*d.x*k*(-2*P.y*v.y-2*w.y*b.y)+S*d.y*l.x*(2*P.y*v.y+2*w.y*b.y)+m.x*d.y*k*(-4*P.y*v.y-4*w.y*b.y)+g.x*k*l.y*(-6*P.y*v.y-6*w.y*b.y)+P.x*k*l.y*(6*P.y*v.y+6*w.y*b.y)+w.x*k*l.y*(6*P.y*b.y+3*$)+q*(-2*P.y*w.y*b.y-Y*v.y-w.y*(2*P.y*b.y+$)-P.y*(2*P.y*v.y+2*w.y*b.y)),-g.x*m.x*d.y*l.x*l.y*b.y+g.x*m.y*d.x*l.x*l.y*b.y+6*g.x*m.y*d.y*l.x*b.x*l.y-6*g.y*m.x*d.x*l.x*l.y*b.y-g.y*m.x*d.y*l.x*b.x*l.y+g.y*m.y*d.x*l.x*b.x*l.y+m.x*m.y*d.x*d.y*l.x*b.y-m.x*m.y*d.x*d.y*b.x*l.y+m.x*P.x*d.y*l.x*l.y*b.y+m.x*P.y*d.y*l.x*b.x*l.y+m.x*w.x*d.y*l.x*w.y*l.y-P.x*m.y*d.x*l.x*l.y*b.y-6*P.x*m.y*d.y*l.x*b.x*l.y-m.y*d.x*P.y*l.x*b.x*l.y-m.y*d.x*w.x*l.x*w.y*l.y-6*g.x*P.x*b.x*F-2*g.x*B*l.x*b.x+2*P.x*B*l.x*b.x+2*g.y*C*l.y*b.y-6*g.x*g.y*l.x*b.x*D+3*g.x*m.x*d.x*D*b.y-2*g.x*m.x*d.y*b.x*D-4*g.x*m.y*d.x*b.x*D+3*g.y*m.x*d.x*b.x*D+6*g.x*g.y*k*l.y*b.y+6*g.x*P.x*l.x*D*b.y-3*g.x*m.y*d.y*k*b.y+2*g.x*d.x*z*l.x*b.y+2*g.x*d.x*z*b.x*l.y+6*g.x*P.y*l.x*b.x*D+6*g.x*w.x*l.x*w.y*D+4*g.y*m.x*d.y*k*b.y+6*g.y*P.x*l.x*b.x*D+2*g.y*m.y*d.x*k*b.y-3*g.y*m.y*d.y*k*b.x+2*g.y*d.x*z*l.x*b.x-3*m.x*P.x*d.x*D*b.y+2*m.x*P.x*d.y*b.x*D+m.x*m.y*z*l.x*b.x-3*m.x*d.x*P.y*b.x*D-3*m.x*d.x*w.x*w.y*D+4*P.x*m.y*d.x*b.x*D-2*g.x*S*d.y*l.y*b.y-6*g.y*P.x*k*l.y*b.y-6*g.y*P.y*k*b.x*l.y-6*g.y*w.x*k*w.y*l.y-2*g.y*S*d.y*l.x*b.y-2*g.y*S*d.y*b.x*l.y-m.x*m.y*S*l.y*b.y-2*m.x*j*l.x*b.x*l.y+3*P.x*m.y*d.y*k*b.y-2*P.x*d.x*z*l.x*b.y-2*P.x*d.x*z*b.x*l.y-6*P.x*P.y*l.x*b.x*D-6*P.x*w.x*l.x*w.y*D+3*m.y*P.y*d.y*k*b.x+3*m.y*w.x*d.y*k*w.y-2*d.x*P.y*z*l.x*b.x-2*d.x*w.x*z*l.x*w.y-j*d.x*d.y*l.x*b.x+2*P.x*S*d.y*l.y*b.y-3*m.y*X*d.y*l.x*l.y+6*P.y*w.x*k*w.y*l.y+2*I*m.y*l.x*l.y*b.y+I*d.x*d.y*l.y*b.y+2*S*P.y*d.y*b.x*l.y+2*S*w.x*d.y*w.y*l.y-3*g.x*X*F+3*P.x*X*F+3*E*b.x*F-3*M*q*b.y+3*T*b.x*F+X*B*l.x+R*k*b.x-N*D*b.y+3*g.y*X*l.x*D-m.x*j*k*b.y+m.x*X*d.y*D+2*m.y*d.x*X*D+I*m.y*b.x*D-d.x*X*z*l.y-3*P.y*X*l.x*D-3*E*l.x*D*b.y+3*M*k*b.x*l.y-I*z*l.x*b.y+j*S*b.x*l.y-3*T*l.x*D*b.y+3*Y*k*b.x*l.y+S*d.y*l.x*(2*P.y*b.y+$)+m.x*d.x*l.x*l.y*(6*P.y*b.y+3*$)+C*l.y*(-2*P.y*b.y-$)+g.y*q*(6*P.y*b.y+3*$)+m.y*d.x*k*(-2*P.y*b.y-$)+m.x*d.y*k*(-4*P.y*b.y-2*$)+g.x*k*l.y*(-6*P.y*b.y-3*$)+P.x*k*l.y*(6*P.y*b.y+3*$)+q*(-2*P.y*$-Y*b.y-P.y*(2*P.y*b.y+$)),-g.x*m.x*d.y*l.x*w.y*l.y+g.x*m.y*d.x*l.x*w.y*l.y+6*g.x*m.y*w.x*d.y*l.x*l.y-6*g.y*m.x*d.x*l.x*w.y*l.y-g.y*m.x*w.x*d.y*l.x*l.y+g.y*m.y*d.x*w.x*l.x*l.y-m.x*m.y*d.x*w.x*d.y*l.y+m.x*m.y*d.x*d.y*l.x*w.y+m.x*P.x*d.y*l.x*w.y*l.y+6*m.x*d.x*P.y*l.x*w.y*l.y+m.x*P.y*w.x*d.y*l.x*l.y-P.x*m.y*d.x*l.x*w.y*l.y-6*P.x*m.y*w.x*d.y*l.x*l.y-m.y*d.x*P.y*w.x*l.x*l.y-6*g.x*P.x*w.x*F-2*g.x*w.x*B*l.x+6*g.y*P.y*q*w.y+2*P.x*w.x*B*l.x+2*g.y*C*w.y*l.y-2*C*P.y*w.y*l.y-6*g.x*g.y*w.x*l.x*D+3*g.x*m.x*d.x*w.y*D-2*g.x*m.x*w.x*d.y*D-4*g.x*m.y*d.x*w.x*D+3*g.y*m.x*d.x*w.x*D+6*g.x*g.y*k*w.y*l.y+6*g.x*P.x*l.x*w.y*D-3*g.x*m.y*d.y*k*w.y+2*g.x*d.x*w.x*z*l.y+2*g.x*d.x*z*l.x*w.y+6*g.x*P.y*w.x*l.x*D+4*g.y*m.x*d.y*k*w.y+6*g.y*P.x*w.x*l.x*D+2*g.y*m.y*d.x*k*w.y-3*g.y*m.y*w.x*d.y*k+2*g.y*d.x*w.x*z*l.x-3*m.x*P.x*d.x*w.y*D+2*m.x*P.x*w.x*d.y*D+m.x*m.y*w.x*z*l.x-3*m.x*d.x*P.y*w.x*D+4*P.x*m.y*d.x*w.x*D-6*g.x*P.y*k*w.y*l.y-2*g.x*S*d.y*w.y*l.y-6*g.y*P.x*k*w.y*l.y-6*g.y*P.y*w.x*k*l.y-2*g.y*S*w.x*d.y*l.y-2*g.y*S*d.y*l.x*w.y-m.x*m.y*S*w.y*l.y-4*m.x*P.y*d.y*k*w.y-2*m.x*j*w.x*l.x*l.y+3*P.x*m.y*d.y*k*w.y-2*P.x*d.x*w.x*z*l.y-2*P.x*d.x*z*l.x*w.y-6*P.x*P.y*w.x*l.x*D-2*m.y*d.x*P.y*k*w.y+3*m.y*P.y*w.x*d.y*k-2*d.x*P.y*w.x*z*l.x-j*d.x*w.x*d.y*l.x+6*P.x*P.y*k*w.y*l.y+2*P.x*S*d.y*w.y*l.y+2*I*m.y*l.x*w.y*l.y+I*d.x*d.y*w.y*l.y+2*S*P.y*w.x*d.y*l.y+2*S*P.y*d.y*l.x*w.y+3*E*w.x*F-3*M*q*w.y+3*T*w.x*F+R*w.x*k-N*w.y*D-3*Y*q*w.y-m.x*j*k*w.y+I*m.y*w.x*D-3*E*l.x*w.y*D+3*M*w.x*k*l.y-I*z*l.x*w.y+j*S*w.x*l.y-3*T*l.x*w.y*D+3*Y*w.x*k*l.y,g.x*g.y*m.x*d.y*l.x*l.y-g.x*g.y*m.y*d.x*l.x*l.y+g.x*m.x*m.y*d.x*d.y*l.y-g.y*m.x*m.y*d.x*d.y*l.x-g.x*m.x*P.y*d.y*l.x*l.y+6*g.x*P.x*m.y*d.y*l.x*l.y+g.x*m.y*d.x*P.y*l.x*l.y-g.y*m.x*P.x*d.y*l.x*l.y-6*g.y*m.x*d.x*P.y*l.x*l.y+g.y*P.x*m.y*d.x*l.x*l.y-m.x*P.x*m.y*d.x*d.y*l.y+m.x*m.y*d.x*P.y*d.y*l.x+m.x*P.x*P.y*d.y*l.x*l.y-P.x*m.y*d.x*P.y*l.x*l.y-2*g.x*P.x*B*l.x+2*g.y*C*P.y*l.y-3*g.x*g.y*m.x*d.x*D-6*g.x*g.y*P.x*l.x*D+3*g.x*g.y*m.y*d.y*k-2*g.x*g.y*d.x*z*l.x-2*g.x*m.x*P.x*d.y*D-g.x*m.x*m.y*z*l.x+3*g.x*m.x*d.x*P.y*D-4*g.x*P.x*m.y*d.x*D+3*g.y*m.x*P.x*d.x*D+6*g.x*g.y*P.y*k*l.y+2*g.x*g.y*S*d.y*l.y+2*g.x*m.x*j*l.x*l.y+2*g.x*P.x*d.x*z*l.y+6*g.x*P.x*P.y*l.x*D-3*g.x*m.y*P.y*d.y*k+2*g.x*d.x*P.y*z*l.x+g.x*j*d.x*d.y*l.x+g.y*m.x*m.y*S*l.y+4*g.y*m.x*P.y*d.y*k-3*g.y*P.x*m.y*d.y*k+2*g.y*P.x*d.x*z*l.x+2*g.y*m.y*d.x*P.y*k+m.x*P.x*m.y*z*l.x-3*m.x*P.x*d.x*P.y*D-2*g.x*S*P.y*d.y*l.y-6*g.y*P.x*P.y*k*l.y-2*g.y*P.x*S*d.y*l.y-2*g.y*I*m.y*l.x*l.y-g.y*I*d.x*d.y*l.y-2*g.y*S*P.y*d.y*l.x-2*m.x*P.x*j*l.x*l.y-m.x*m.y*S*P.y*l.y+3*P.x*m.y*P.y*d.y*k-2*P.x*d.x*P.y*z*l.x-P.x*j*d.x*d.y*l.x+3*M*m.x*d.x*l.x*l.y+3*m.x*d.x*Y*l.x*l.y+2*P.x*S*P.y*d.y*l.y-3*E*m.y*d.y*l.x*l.y+2*I*m.y*P.y*l.x*l.y+I*d.x*P.y*d.y*l.y-3*T*m.y*d.y*l.x*l.y-A*F+L*q+_*F-U*q-3*g.x*T*F-g.x*R*k+3*E*P.x*F+g.y*N*D+3*g.y*Y*q+P.x*R*k+E*B*l.x-3*M*P.y*q-M*C*l.y+T*B*l.x-N*P.y*D-C*Y*l.y-g.x*I*m.y*D+g.y*m.x*j*k-3*g.x*M*k*l.y-g.x*j*S*l.y+g.y*I*z*l.x-m.x*j*P.y*k+3*E*g.y*l.x*D+E*m.x*d.y*D+2*E*m.y*d.x*D-2*M*m.x*d.y*k-M*m.y*d.x*k+I*P.x*m.y*D-3*g.x*Y*k*l.y+3*g.y*T*l.x*D+m.x*T*d.y*D-2*m.x*Y*d.y*k+P.x*j*S*l.y-m.y*d.x*Y*k-E*d.x*z*l.y-3*E*P.y*l.x*D+3*M*P.x*k*l.y+M*S*d.y*l.x-I*P.y*z*l.x+2*T*m.y*d.x*D+3*P.x*Y*k*l.y-T*d.x*z*l.y-3*T*P.y*l.x*D+S*Y*d.y*l.x),et=tt.getRootsInInterval(0,1),nt=0;nt<et.length;nt++){var rt=et[nt],it=new s(l.x,d.x,m.x,g.x-P.x-rt*w.x-rt*rt*b.x-rt*rt*rt*v.x).getRoots(),ot=new s(l.y,d.y,m.y,g.y-P.y-rt*w.y-rt*rt*b.y-rt*rt*rt*v.y).getRoots();if(it.length>0&&ot.length>0){t:for(var yt=0;yt<it.length;yt++){var st=it[yt];if(0<=st&&st<=1)for(var ut=0;ut<ot.length;ut++)if(Math.abs(st-ot[ut])<1e-4){O.points.push(v.multiply(rt*rt*rt).add(b.multiply(rt*rt).add(w.multiply(rt).add(P))));break t}}}}return O},t.intersectBezier3Circle=function(e,n,r,i,o,y){return t.intersectBezier3Ellipse(e,n,r,i,o,y,y)},t.intersectBezier3Ellipse=function(e,n,r,i,o,u,x){var a,p,c,h,f,l,d,m,g=new t;a=e.multiply(-1),p=n.multiply(3),c=r.multiply(-3),h=a.add(p.add(c.add(i))),f=new y(h.x,h.y),a=e.multiply(3),p=n.multiply(-6),c=r.multiply(3),h=a.add(p.add(c)),l=new y(h.x,h.y),a=e.multiply(-3),p=n.multiply(3),c=a.add(p),d=new y(c.x,c.y),m=new y(e.x,e.y);for(var v=u*u,b=x*x,w=new s(f.x*f.x*b+f.y*f.y*v,2*(f.x*l.x*b+f.y*l.y*v),2*(f.x*d.x*b+f.y*d.y*v)+l.x*l.x*b+l.y*l.y*v,2*f.x*b*(m.x-o.x)+2*f.y*v*(m.y-o.y)+2*(l.x*d.x*b+l.y*d.y*v),2*l.x*b*(m.x-o.x)+2*l.y*v*(m.y-o.y)+d.x*d.x*b+d.y*d.y*v,2*d.x*b*(m.x-o.x)+2*d.y*v*(m.y-o.y),m.x*m.x*b-2*m.y*o.y*v-2*m.x*o.x*b+m.y*m.y*v+o.x*o.x*b+o.y*o.y*v-v*b),P=w.getRootsInInterval(0,1),O=0;O<P.length;O++){var E=P[O];g.points.push(f.multiply(E*E*E).add(l.multiply(E*E).add(d.multiply(E).add(m))))}return g},t.intersectBezier3Line=function(e,n,r,i,o,u){var x,a,p,c,h,f,l,d,m,g,v=o.min(u),b=o.max(u),w=new t;x=e.multiply(-1),a=n.multiply(3),p=r.multiply(-3),c=x.add(a.add(p.add(i))),h=new y(c.x,c.y),x=e.multiply(3),a=n.multiply(-6),p=r.multiply(3),c=x.add(a.add(p)),f=new y(c.x,c.y),x=e.multiply(-3),a=n.multiply(3),p=x.add(a),l=new y(p.x,p.y),d=new y(e.x,e.y),g=new y(o.y-u.y,u.x-o.x),m=o.x*u.y-u.x*o.y;for(var P=new s(g.dot(h),g.dot(f),g.dot(l),g.dot(d)+m).getRoots(),O=0;O<P.length;O++){var E=P[O];if(0<=E&&E<=1){var A=e.lerp(n,E),M=n.lerp(r,E),L=r.lerp(i,E),I=A.lerp(M,E),N=M.lerp(L,E),j=I.lerp(N,E);o.x===u.x?v.y<=j.y&&j.y<=b.y&&w.appendPoint(j):o.y===u.y?v.x<=j.x&&j.x<=b.x&&w.appendPoint(j):j.gte(v)&&j.lte(b)&&w.appendPoint(j)}}return w},t.intersectBezier3Polygon=function(e,n,r,i,o){for(var y=new t,s=o.length,u=0;u<s;u++){var x=o[u],a=o[(u+1)%s],p=t.intersectBezier3Line(e,n,r,i,x,a);y.appendPoints(p.points)}return y},t.intersectBezier3Rectangle=function(e,n,r,i,o,s){var u=o.min(s),x=o.max(s),a=new y(x.x,u.y),p=new y(u.x,x.y),c=t.intersectBezier3Line(e,n,r,i,u,a),h=t.intersectBezier3Line(e,n,r,i,a,x),f=t.intersectBezier3Line(e,n,r,i,x,p),l=t.intersectBezier3Line(e,n,r,i,p,u),d=new t;return d.appendPoints(c.points),d.appendPoints(h.points),d.appendPoints(f.points),d.appendPoints(l.points),d},t.intersectCircleCircle=function(e,n,r,i){var o,s=n+i,u=Math.abs(n-i),x=e.distanceFrom(r);if(x>s)o=new t("Outside");else if(x<u)o=new t("Inside");else{o=new t("Intersection");var a=(n*n-i*i+x*x)/(2*x),p=Math.sqrt(n*n-a*a),c=e.lerp(r,a/x),h=p/x;o.points.push(new y(c.x-h*(r.y-e.y),c.y+h*(r.x-e.x))),o.points.push(new y(c.x+h*(r.y-e.y),c.y-h*(r.x-e.x)))}return o},t.intersectCircleEllipse=function(e,n,r,i,o){return t.intersectEllipseEllipse(e,n,n,r,i,o)},t.intersectCircleLine=function(e,n,r,i){var o,y=(i.x-r.x)*(i.x-r.x)+(i.y-r.y)*(i.y-r.y),s=2*((i.x-r.x)*(r.x-e.x)+(i.y-r.y)*(r.y-e.y)),u=e.x*e.x+e.y*e.y+r.x*r.x+r.y*r.y-2*(e.x*r.x+e.y*r.y)-n*n,x=s*s-4*y*u;if(x<0)o=new t("Outside");else if(0===x)o=new t("Tangent");else{var a=Math.sqrt(x),p=(-s+a)/(2*y),c=(-s-a)/(2*y);(p<0||p>1)&&(c<0||c>1)?o=new t(p<0&&c<0||p>1&&c>1?"Outside":"Inside"):(o=new t("Intersection"),0<=p&&p<=1&&o.points.push(r.lerp(i,p)),0<=c&&c<=1&&o.points.push(r.lerp(i,c)))}return o},t.intersectCirclePolygon=function(e,n,r){for(var i,o=new t,y=r.length,s=0;s<y;s++){var u=r[s],x=r[(s+1)%y];i=t.intersectCircleLine(e,n,u,x),o.appendPoints(i.points)}return o.points.length>0?o.status="Intersection":o.status=i.status,o},t.intersectCircleRectangle=function(e,n,r,i){var o=r.min(i),s=r.max(i),u=new y(s.x,o.y),x=new y(o.x,s.y),a=t.intersectCircleLine(e,n,o,u),p=t.intersectCircleLine(e,n,u,s),c=t.intersectCircleLine(e,n,s,x),h=t.intersectCircleLine(e,n,x,o),f=new t;return f.appendPoints(a.points),f.appendPoints(p.points),f.appendPoints(c.points),f.appendPoints(h.points),f.points.length>0?f.status="Intersection":f.status=a.status,f},t.intersectEllipseEllipse=function(e,n,r,i,o,u){for(var x=[r*r,0,n*n,-2*r*r*e.x,-2*n*n*e.y,r*r*e.x*e.x+n*n*e.y*e.y-n*n*r*r],a=[u*u,0,o*o,-2*u*u*i.x,-2*o*o*i.y,u*u*i.x*i.x+o*o*i.y*i.y-o*o*u*u],p=t.bezout(x,a),c=p.getRoots(),h=.001,f=(x[0]*x[0]+2*x[1]*x[1]+x[2]*x[2])*h,l=(a[0]*a[0]+2*a[1]*a[1]+a[2]*a[2])*h,d=new t,m=0;m<c.length;m++)for(var g=new s(x[0],x[3]+c[m]*x[1],x[5]+c[m]*(x[4]+c[m]*x[2])),v=g.getRoots(),b=0;b<v.length;b++){var w=(x[0]*v[b]+x[1]*c[m]+x[3])*v[b]+(x[2]*c[m]+x[4])*c[m]+x[5];Math.abs(w)<f&&(w=(a[0]*v[b]+a[1]*c[m]+a[3])*v[b]+(a[2]*c[m]+a[4])*c[m]+a[5],Math.abs(w)<l&&d.appendPoint(new y(v[b],c[m])))}return d},t.intersectEllipseLine=function(e,n,r,i,o){var s,u=new y(i.x,i.y),x=y.fromPoints(i,o),a=new y(e.x,e.y),p=u.subtract(a),c=new y(x.x/(n*n),x.y/(r*r)),h=new y(p.x/(n*n),p.y/(r*r)),f=x.dot(c),l=x.dot(h);e=p.dot(h)-1;var d=l*l-f*e;if(d<0)s=new t("Outside");else if(d>0){var m=Math.sqrt(d),g=(-l-m)/f,v=(-l+m)/f;(g<0||1<g)&&(v<0||1<v)?s=new t(g<0&&v<0||g>1&&v>1?"Outside":"Inside"):(s=new t("Intersection"),0<=g&&g<=1&&s.appendPoint(i.lerp(o,g)),0<=v&&v<=1&&s.appendPoint(i.lerp(o,v)))}else{var b=-l/f;0<=b&&b<=1?(s=new t("Intersection"),s.appendPoint(i.lerp(o,b))):s=new t("Outside")}return s},t.intersectEllipsePolygon=function(e,n,r,i){for(var o=new t,y=i.length,s=0;s<y;s++){var u=i[s],x=i[(s+1)%y],a=t.intersectEllipseLine(e,n,r,u,x);o.appendPoints(a.points)}return o},t.intersectEllipseRectangle=function(e,n,r,i,o){var s=i.min(o),u=i.max(o),x=new y(u.x,s.y),a=new y(s.x,u.y),p=t.intersectEllipseLine(e,n,r,s,x),c=t.intersectEllipseLine(e,n,r,x,u),h=t.intersectEllipseLine(e,n,r,u,a),f=t.intersectEllipseLine(e,n,r,a,s),l=new t;return l.appendPoints(p.points),l.appendPoints(c.points),l.appendPoints(h.points),l.appendPoints(f.points),l},t.intersectLineLine=function(e,n,r,i){var o,s=(i.x-r.x)*(e.y-r.y)-(i.y-r.y)*(e.x-r.x),u=(n.x-e.x)*(e.y-r.y)-(n.y-e.y)*(e.x-r.x),x=(i.y-r.y)*(n.x-e.x)-(i.x-r.x)*(n.y-e.y);if(0!==x){var a=s/x,p=u/x;0<=a&&a<=1&&0<=p&&p<=1?(o=new t("Intersection"),o.points.push(new y(e.x+a*(n.x-e.x),e.y+a*(n.y-e.y)))):o=new t}else o=new t(0===s||0===u?"Coincident":"Parallel");return o},t.intersectLinePolygon=function(e,n,r){for(var i=new t,o=r.length,y=0;y<o;y++){var s=r[y],u=r[(y+1)%o],x=t.intersectLineLine(e,n,s,u);i.appendPoints(x.points)}return i},t.intersectLineRectangle=function(e,n,r,i){var o=r.min(i),s=r.max(i),u=new y(s.x,o.y),x=new y(o.x,s.y),a=t.intersectLineLine(o,u,e,n),p=t.intersectLineLine(u,s,e,n),c=t.intersectLineLine(s,x,e,n),h=t.intersectLineLine(x,o,e,n),f=new t;return f.appendPoints(a.points),f.appendPoints(p.points),f.appendPoints(c.points),f.appendPoints(h.points),f},t.intersectPolygonPolygon=function(e,n){for(var r=new t,i=e.length,o=0;o<i;o++){var y=e[o],s=e[(o+1)%i],u=t.intersectLinePolygon(y,s,n);r.appendPoints(u.points)}return r},t.intersectPolygonRectangle=function(e,n,r){var i=n.min(r),o=n.max(r),s=new y(o.x,i.y),u=new y(i.x,o.y),x=t.intersectLinePolygon(i,s,e),a=t.intersectLinePolygon(s,o,e),p=t.intersectLinePolygon(o,u,e),c=t.intersectLinePolygon(u,i,e),h=new t;return h.appendPoints(x.points),h.appendPoints(a.points),h.appendPoints(p.points),h.appendPoints(c.points),h},t.intersectRayRay=function(e,n,r,i){var o,s=(i.x-r.x)*(e.y-r.y)-(i.y-r.y)*(e.x-r.x),u=(n.x-e.x)*(e.y-r.y)-(n.y-e.y)*(e.x-r.x),x=(i.y-r.y)*(n.x-e.x)-(i.x-r.x)*(n.y-e.y);if(0!==x){var a=s/x;o=new t("Intersection"),o.points.push(new y(e.x+a*(n.x-e.x),e.y+a*(n.y-e.y)))}else o=new t(0===s||0===u?"Coincident":"Parallel");return o},t.intersectRectangleRectangle=function(e,n,r,i){var o=e.min(n),s=e.max(n),u=new y(s.x,o.y),x=new y(o.x,s.y),a=t.intersectLineRectangle(o,u,r,i),p=t.intersectLineRectangle(u,s,r,i),c=t.intersectLineRectangle(s,x,r,i),h=t.intersectLineRectangle(x,o,r,i),f=new t;return f.appendPoints(a.points),f.appendPoints(p.points),f.appendPoints(c.points),f.appendPoints(h.points),f},t.bezout=function(t,e){var n=t[0]*e[1]-e[0]*t[1],r=t[0]*e[2]-e[0]*t[2],i=t[0]*e[3]-e[0]*t[3],o=t[0]*e[4]-e[0]*t[4],y=t[0]*e[5]-e[0]*t[5],u=t[1]*e[2]-e[1]*t[2],x=t[1]*e[4]-e[1]*t[4],a=t[1]*e[5]-e[1]*t[5],p=t[2]*e[3]-e[2]*t[3],c=t[3]*e[4]-e[3]*t[4],h=t[3]*e[5]-e[3]*t[5],f=a+c,l=x-p;return new s(n*u-r*r,n*l+i*u-2*r*o,n*f+i*l-o*o-2*r*y,n*h+i*f-2*o*y,i*h-y*y)},t}(),y=function(){function t(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.x=t,this.y=e}return t.prototype.add=function(e){return new t(this.x+e.x,this.y+e.y)},t.prototype.addEquals=function(t){return this.x+=t.x,this.y+=t.y,this},t.prototype.scalarAdd=function(e){return new t(this.x+e,this.y+e)},t.prototype.scalarAddEquals=function(t){return this.x+=t,this.y+=t,this},t.prototype.subtract=function(e){return new t(this.x-e.x,this.y-e.y)},t.prototype.subtractEquals=function(t){return this.x-=t.x,this.y-=t.y,this},t.prototype.scalarSubtract=function(e){return new t(this.x-e,this.y-e)},t.prototype.scalarSubtractEquals=function(t){return this.x-=t,this.y-=t,this},t.prototype.multiply=function(e){return new t(this.x*e,this.y*e)},t.prototype.multiplyEquals=function(t){return this.x*=t,this.y*=t,this},t.prototype.divide=function(e){return new t(this.x/e,this.y/e)},t.prototype.divideEquals=function(t){return this.x/=t,this.y/=t,this},t.prototype.eq=function(t){return this.x===t.x&&this.y===t.y},t.prototype.lt=function(t){return this.x<t.x&&this.y<t.y},t.prototype.lte=function(t){return this.x<=t.x&&this.y<=t.y},t.prototype.gt=function(t){return this.x>t.x&&this.y>t.y},t.prototype.gte=function(t){return this.x>=t.x&&this.y>=t.y},t.prototype.lerp=function(e,n){return new t(this.x+(e.x-this.x)*n,this.y+(e.y-this.y)*n)},t.prototype.distanceFrom=function(t){var e=this.x-t.x,n=this.y-t.y;return Math.sqrt(e*e+n*n)},t.prototype.min=function(e){return new t(Math.min(this.x,e.x),Math.min(this.y,e.y))},t.prototype.max=function(e){return new t(Math.max(this.x,e.x),Math.max(this.y,e.y))},t.prototype.toString=function(){return this.x+","+this.y},t.prototype.setXY=function(t,e){this.x=t,this.y=e},t.prototype.setFromPoint=function(t){this.x=t.x,this.y=t.y},t.prototype.swap=function(t){var e=this.x,n=this.y;this.x=t.x,this.y=t.y,t.x=e,t.y=n},t.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},t.prototype.dot=function(t){return this.x*t.x+this.y*t.y},t.prototype.cross=function(t){return this.x*t.y-this.y*t.x},t.prototype.unit=function(){return this.divide(this.length())},t.prototype.unitEquals=function(){return this.divideEquals(this.length()),this},t.prototype.perp=function(){return new t(-this.y,this.x)},t.fromPoints=function(e,n){return new t(n.x-e.x,n.y-e.y)},t}(),s=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.coefs=[];for(var n=t.length-1;n>=0;n--)this.coefs.push(t[n])}return t.prototype.eval=function(t){for(var e=0,n=this.coefs.length-1;n>=0;n--)e=e*t+this.coefs[n];return e},t.prototype.multiply=function(e){var n,r=new t;for(n=0;n<=this.getDegree()+e.getDegree();n++)r.coefs.push(0);for(n=0;n<=this.getDegree();n++)for(var i=0;i<=e.getDegree();i++)r.coefs[n+i]+=this.coefs[n]*e.coefs[i];return r},t.prototype.divide_scalar=function(t){for(var e=0;e<this.coefs.length;e++)this.coefs[e]/=t},t.prototype.simplify=function(){for(var e=this.getDegree();e>=0&&Math.abs(this.coefs[e])<=t.TOLERANCE;e--)this.coefs.pop()},t.prototype.bisection=function(e,n){var r,i=this.eval(e),o=this.eval(n);if(Math.abs(i)<=t.TOLERANCE)r=e;else if(Math.abs(o)<=t.TOLERANCE)r=n;else if(i*o<=0)for(var y=Math.log(n-e),s=Math.log(10)*t.ACCURACY,u=Math.ceil((y+s)/Math.log(2)),x=0;x<u;x++){r=.5*(e+n);var a=this.eval(r);if(Math.abs(a)<=t.TOLERANCE)break;a*i<0?(n=r,o=a):(e=r,i=a)}return r},t.prototype.toString=function(){var t,e=new Array,n=new Array;for(t=this.coefs.length-1;t>=0;t--){var r=this.coefs[t];if(0!==r){var i=r<0?" - ":" + ";r=Math.abs(r),t>0&&1===r?r="x":r+="x",t>1&&(r+="^"+t),n.push(i),e.push(r)}}n[0]=" + "===n[0]?"":"-";var o="";for(t=0;t<e.length;t++)o+=n[t]+e[t];return o},t.prototype.getDegree=function(){return this.coefs.length-1},t.prototype.getDerivative=function(){for(var e=new t,n=1;n<this.coefs.length;n++)e.coefs.push(n*this.coefs[n]);return e},t.prototype.getRoots=function(){var t;switch(this.simplify(),this.getDegree()){case 0:t=new Array;break;case 1:t=this.getLinearRoot();break;case 2:t=this.getQuadraticRoots();break;case 3:t=this.getCubicRoots();break;case 4:t=this.getQuarticRoots();break;default:t=new Array}return t},t.prototype.getRootsInInterval=function(t,e){var n,r,i=new Array;if(1===this.getDegree())null!=(r=this.bisection(t,e))&&i.push(r);else{var o=this.getDerivative(),y=o.getRootsInInterval(t,e);if(y.length>0){for(r=this.bisection(t,y[0]),null!=r&&i.push(r),n=0;n<=y.length-2;n++)null!=(r=this.bisection(y[n],y[n+1]))&&i.push(r);r=this.bisection(y[y.length-1],e),null!=r&&i.push(r)}else null!=(r=this.bisection(t,e))&&i.push(r)}return i},t.prototype.getLinearRoot=function(){var t=new Array,e=this.coefs[1];return 0!==e&&t.push(-this.coefs[0]/e),t},t.prototype.getQuadraticRoots=function(){var t=new Array;if(2===this.getDegree()){var e=this.coefs[2],n=this.coefs[1]/e,r=this.coefs[0]/e,i=n*n-4*r;if(i>0){var o=Math.sqrt(i);t.push(.5*(-n+o)),t.push(.5*(-n-o))}else 0===i&&t.push(.5*-n)}return t},t.prototype.getCubicRoots=function(){var e=new Array;if(3===this.getDegree()){var n=this.coefs[3],r=this.coefs[2]/n,i=this.coefs[1]/n,o=this.coefs[0]/n,y=(3*i-r*r)/3,s=(2*r*r*r-9*i*r+27*o)/27,u=r/3,x=s*s/4+y*y*y/27,a=s/2;Math.abs(x)<=t.TOLERANCE&&0;var p;if(x>0){var c,h=Math.sqrt(x);p=-a+h,c=p>=0?Math.pow(p,1/3):-Math.pow(-p,1/3),p=-a-h,p>=0?c+=Math.pow(p,1/3):c-=Math.pow(-p,1/3),e.push(c-u)}else if(x<0){var f=Math.sqrt(-y/3),l=Math.atan2(Math.sqrt(-x),-a)/3,d=Math.cos(l),m=Math.sin(l),g=Math.sqrt(3);e.push(2*f*d-u),e.push(-f*(d+g*m)-u),e.push(-f*(d-g*m)-u)}else p=a>=0?-Math.pow(a,1/3):Math.pow(-a,1/3),e.push(2*p-u),e.push(-p-u)}return e},t.prototype.getQuarticRoots=function(){var e=new Array;if(4===this.getDegree()){var n=this.coefs[4],r=this.coefs[3]/n,i=this.coefs[2]/n,o=this.coefs[1]/n,y=this.coefs[0]/n,s=new t(1,-i,r*o-4*y,-r*r*y+4*i*y-o*o).getCubicRoots(),u=s[0],x=r*r/4-i+u;Math.abs(x)<=t.TOLERANCE&&(x=0);var a,p;if(x>0){var c=Math.sqrt(x),h=3*r*r/4-c*c-2*i;a=(4*r*i-8*o-r*r*r)/(4*c);var f,l=h+a,d=h-a;Math.abs(l)<=t.TOLERANCE&&(l=0),Math.abs(d)<=t.TOLERANCE&&(d=0),l>=0&&(f=Math.sqrt(l),e.push(-r/4+(c+f)/2),e.push(-r/4+(c-f)/2)),d>=0&&(f=Math.sqrt(d),e.push(-r/4+(f-c)/2),e.push(-r/4-(f+c)/2))}else x>=0&&(a=u*u-4*y)>=-t.TOLERANCE&&(a<0&&(a=0),a=2*Math.sqrt(a),h=3*r*r/4-2*i,h+a>=t.TOLERANCE&&(p=Math.sqrt(h+a),e.push(-r/4+p/2),e.push(-r/4-p/2)),h-a>=t.TOLERANCE&&(p=Math.sqrt(h-a),e.push(-r/4+p/2),e.push(-r/4-p/2)))}return e},t}();s.TOLERANCE=1e-6,s.ACCURACY=6;var u=function(){function t(t,e){this.type=t,this.text=e}return t.prototype.typeis=function(t){return this.type===t},t}(),x=function(){function t(t){this.segments=null,this.parseData(t)}return t.prototype.appendPathSegment=function(t){t.previous=this.segments[this.segments.length-1],this.segments.push(t)},t.prototype.parseData=function(e){var n=this.tokenize(e),r=0,i=n[r],o="BOD";for(this.segments=new Array;!i.typeis(t.EOD);){var y,s=new Array;if("BOD"===o){if("M"!==i.text&&"m"!==i.text)throw new Error("Path data must begin with a moveto command");r++,y=t.PARAMS[i.text].length,o=i.text}else i.typeis(t.NUMBER)?y=t.PARAMS[o].length:(r++,y=t.PARAMS[i.text].length,o=i.text);if(!(r+y<n.length))throw new Error("Path data ended before all parameters were found");for(var u=r;u<r+y;u++){var x=n[u];if(!x.typeis(t.NUMBER))throw new Error("Parameter type is not a number: "+o+","+x.text);s[s.length]=x.text}var a,v=this.segments.length,L=0===v?null:this.segments[v-1];switch(o){case"A":a=new p(s,this,L);break;case"C":a=new h(s,this,L);break;case"c":a=new P(s,this,L);break;case"H":a=new f(s,this,L);break;case"L":a=new l(s,this,L);break;case"l":a=new O(s,this,L);break;case"M":a=new d(s,this,L);break;case"m":a=new E(s,this,L);break;case"Q":a=new c(s,this,L);break;case"q":a=new w(s,this,L);break;case"S":a=new g(s,this,L);break;case"s":a=new M(s,this,L);break;case"T":a=new m(s,this,L);break;case"t":a=new A(s,this,L);break;case"Z":case"z":a=new b(s,this,L);break;default:throw new Error("Unsupported segment type: "+o)}this.segments.push(a),r+=y,i=n[r],"M"===o&&(o="L"),"m"===o&&(o="l")}},t.prototype.tokenize=function(e){for(var n=new Array;""!==e;)if(e.match(/^([ \t\r\n,]+)/))e=e.substr(RegExp.$1.length);else if(e.match(/^([aAcChHlLmMqQsStTvVzZ])/))n[n.length]=new u(t.COMMAND,RegExp.$1),e=e.substr(RegExp.$1.length);else{if(!e.match(/^(([-+]?[0-9]+(\.[0-9]*)?|[-+]?\.[0-9]+)([eE][-+]?[0-9]+)?)/))throw new Error("Unrecognized segment command: "+e);n[n.length]=new u(t.NUMBER,parseFloat(RegExp.$1)),e=e.substr(RegExp.$1.length)}return n[n.length]=new u(t.EOD,null),n},t.prototype.intersectShape=function(t){for(var e=new o,n=0;n<this.segments.length;n++){var r=o.intersectShapes(this.segments[n],t);e.appendPoints(r.points)}return e},t.prototype.asIntersectionParams=function(){return new i("Path",[])},t}();x.COMMAND=0,x.NUMBER=1,x.EOD=2,x.PARAMS={A:["rx","ry","x-axis-rotation","large-arc-flag","sweep-flag","x","y"],a:["rx","ry","x-axis-rotation","large-arc-flag","sweep-flag","x","y"],C:["x1","y1","x2","y2","x","y"],c:["x1","y1","x2","y2","x","y"],H:["x"],h:["x"],L:["x","y"],l:["x","y"],M:["x","y"],m:["x","y"],Q:["x1","y1","x","y"],q:["x1","y1","x","y"],S:["x2","y2","x","y"],s:["x2","y2","x","y"],T:["x","y"],t:["x","y"],V:["y"],v:["y"],Z:[],z:[]};var a=function(){function t(t,e,n,r){this.command=t,this.owner=n,this.previous=r,this.points=[];for(var i=0;i<e.length;)this.points.push(new y(parseFloat(e[i]),parseFloat(e[i+1]))),i+=2}return t.prototype.toString=function(){var t=this.points.map(function(t){return t.toString()}),e="";return this.previous.command!==this.command&&(e=this.command),e+t.join(" ")},Object.defineProperty(t.prototype,"lastPoint",{get:function(){return this.points[this.points.length-1]},enumerable:!0,configurable:!0}),t.prototype.asIntersectionParams=function(){return null},t}(),p=function(t){function e(e,n,r){var i=t.call(this,"A",e.slice(e.length-2),n,r)||this;return i.rx=parseFloat(e.shift()),i.ry=parseFloat(e.shift()),i.angle=parseFloat(e.shift()),i.arcFlag=parseFloat(e.shift()),i.sweepFlag=parseFloat(e.shift()),i}return r.a(e,t),e.prototype.toString=function(){var t="";return this.previous.command!==this.command&&(t=this.command),t+[this.rx,this.ry,this.angle,this.arcFlag,this.sweepFlag,this.points[0].toString()].join(",")},e.prototype.asIntersectionParams=function(){return new i("Ellipse",[this.center,this.rx,this.ry])},Object.defineProperty(e.prototype,"center",{get:function(){var t,e=this.previous.lastPoint,n=this.points[0],r=this.rx,i=this.ry,o=this.angle*Math.PI/180,s=Math.cos(o),u=Math.sin(o),x=1e-6,a=e.subtract(n).divide(2),p=a.x*s+a.y*u,c=a.x*-u+a.y*s,h=p*p,f=c*c,l=h/(r*r)+f/(i*i);l>1&&(t=Math.sqrt(l),r*=t,i*=t);var d=r*r,m=i*i,g=d*f,v=m*h;t=(d*m-g-v)/(g+v),Math.abs(t)<x&&(t=0);var b=Math.sqrt(t);this.arcFlag===this.sweepFlag&&(b=-b);var w=e.add(n).divide(2),P=b*r*c/i,O=b*-i*p/r;return new y(P*s-O*u+w.x,P*u+O*s+w.y)},enumerable:!0,configurable:!0}),e}(a),c=function(t){function e(e,n,r){return t.call(this,"Q",e,n,r)||this}return r.a(e,t),Object.defineProperty(e.prototype,"controlPoint",{get:function(){return this.points[0]},enumerable:!0,configurable:!0}),e.prototype.asIntersectionParams=function(){return new i("Bezier2",[this.previous.lastPoint,this.points[0],this.points[1]])},e}(a),h=function(t){function e(e,n,r){return t.call(this,"C",e,n,r)||this}return r.a(e,t),Object.defineProperty(e.prototype,"lastControlPoint",{get:function(){return this.points[1]},enumerable:!0,configurable:!0}),e.prototype.asIntersectionParams=function(){return new i("Bezier3",[this.previous.lastPoint,this.points[0],this.points[1],this.points[2]])},e}(a),f=function(t){function e(e,n,r){return t.call(this,"H",[e.pop(),r.lastPoint.y],n,r)||this}return r.a(e,t),e.prototype.toString=function(){var t="";return this.previous.command!==this.command&&(t=this.command),t+this.points[0].x},e}(a),l=function(t){function e(e,n,r){return t.call(this,"L",e,n,r)||this}return r.a(e,t),e.prototype.toString=function(){var t="";return this.previous.command!==this.command&&"M"!==this.previous.command&&(t=this.command),t+this.points[0].toString()},e.prototype.asIntersectionParams=function(){return new i("Line",[this.previous.lastPoint,this.points[0]])},e}(a),d=function(t){function e(e,n,r){return t.call(this,"M",e,n,r)||this}return r.a(e,t),e.prototype.toString=function(){return"M"+this.points[0].toString()},e}(a),m=function(t){function e(e,n,r){return t.call(this,"T",e,n,r)||this}return r.a(e,t),Object.defineProperty(e.prototype,"controlPoint",{get:function(){var t,e=this.previous.lastPoint;if(this.previous.command.match(/^[QqTt]$/)){var n=this.previous.controlPoint,r=n.subtract(e);t=e.subtract(r)}else t=e;return t},enumerable:!0,configurable:!0}),e.prototype.asIntersectionParams=function(){return new i("Bezier2",[this.previous.lastPoint,this.controlPoint,this.points[0]])},e}(a),g=function(t){function e(e,n,r){return t.call(this,"S",e,n,r)||this}return r.a(e,t),Object.defineProperty(e.prototype,"firstControlPoint",{get:function(){var t,e=this.previous.lastPoint;if(this.previous.command.match(/^[SsCc]$/)){var n=this.previous.lastControlPoint,r=n.subtract(e);t=e.subtract(r)}else t=e;return t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lastControlPoint",{get:function(){return this.points[0]},enumerable:!0,configurable:!0}),e.prototype.asIntersectionParams=function(){return new i("Bezier3",[this.previous.lastPoint,this.firstControlPoint,this.points[0],this.points[1]])},e}(a),v=function(){function t(t,e,n,r){this.command=t,this.owner=n,this.previous=r,this.points=[];for(var i=this.previous?this.previous.lastPoint:new y(0,0),o=0;o<e.length;){var s=new y(i.x+parseFloat(e[o]),i.y+parseFloat(e[o+1]));this.points.push(s),o+=2}}return t.prototype.toString=function(){var t=new Array,e="",n=this.previous?this.previous.lastPoint:new y(0,0);null!=this.previous&&this.previous.command===this.command||(e=this.command);for(var r=0;r<this.points.length;r++){var i=this.points[r].subtract(n);t.push(i.toString())}return e+t.join(" ")},Object.defineProperty(t.prototype,"lastPoint",{get:function(){return this.points[this.points.length-1]},enumerable:!0,configurable:!0}),t.prototype.asIntersectionParams=function(){return null},t}(),b=function(t){function e(e,n,r){return t.call(this,"z",e,n,r)||this}return r.a(e,t),Object.defineProperty(e.prototype,"lastPoint",{get:function(){for(var t,e=this.previous;e;){if(e.command.match(/^[mMzZ]$/)){t=e.lastPoint;break}e=e.previous}return t},enumerable:!0,configurable:!0}),e.prototype.asIntersectionParams=function(){return new i("Line",[this.previous.lastPoint,this.lastPoint])},e}(v),w=function(t){function e(e,n,r){return t.call(this,"q",e,n,r)||this}return r.a(e,t),Object.defineProperty(e.prototype,"controlPoint",{get:function(){return this.points[0]},enumerable:!0,configurable:!0}),e.prototype.asIntersectionParams=function(){return new i("Bezier2",[this.previous.lastPoint,this.points[0],this.points[1]])},e}(v),P=function(t){function e(e,n,r){return t.call(this,"c",e,n,r)||this}return r.a(e,t),Object.defineProperty(e.prototype,"lastControlPoint",{get:function(){return this.points[1]},enumerable:!0,configurable:!0}),e.prototype.asIntersectionParams=function(){return new i("Bezier3",[this.previous.lastPoint,this.points[0],this.points[1],this.points[2]])},e}(v),O=function(t){function e(e,n,r){return t.call(this,"l",e,n,r)||this}return r.a(e,t),e.prototype.toString=function(){var t=this.previous?this.previous.lastPoint:new y(0,0),e=this.points[0].subtract(t),n="";return this.previous.command!==this.command&&"m"!==this.previous.command&&(n=this.command),n+e.toString()},e.prototype.asIntersectionParams=function(){return new i("Line",[this.previous.lastPoint,this.points[0]])},e}(v),E=function(t){function e(e,n,r){return t.call(this,"m",e,n,r)||this}return r.a(e,t),e.prototype.toString=function(){return"m"+this.points[0].toString()},e}(v),A=function(t){function e(e,n,r){return t.call(this,"t",e,n,r)||this}return r.a(e,t),Object.defineProperty(e.prototype,"controlPoint",{get:function(){var t,e=this.previous.lastPoint;if(this.previous.command.match(/^[QqTt]$/)){var n=this.previous.controlPoint,r=n.subtract(e);t=e.subtract(r)}else t=e;return t},enumerable:!0,configurable:!0}),e.prototype.asIntersectionParams=function(){return new i("Bezier2",[this.previous.lastPoint,this.controlPoint,this.points[0]])},e}(v),M=function(t){function e(e,n,r){return t.call(this,"s",e,n,r)||this}return r.a(e,t),Object.defineProperty(e.prototype,"firstControlPoint",{get:function(){var t,e=this.previous.lastPoint;if(this.previous.command.match(/^[SsCc]$/)){var n=this.previous.lastControlPoint,r=n.subtract(e);t=e.subtract(r)}else t=e;return t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lastControlPoint",{get:function(){return this.points[0]},enumerable:!0,configurable:!0}),e.prototype.asIntersectionParams=function(){return new i("Bezier3",[this.previous.lastPoint,this.firstControlPoint,this.points[0],this.points[1]])},e}(v)},79:function(t,e,n){"use strict";function r(t,e){return void 0===e&&(e=Number.NaN),new h.a(t,e)}function i(t,e){return r(t,e)}function o(t,e,n,r){return new d(t,e,n,r)}function y(t,e,n){return new m(t,e,n)}function s(t,e,n,r){return new g(t,e,n,r)}function u(t,e,n,r){return new v(t,e,n,r)}function x(){return new b(Array.isArray(arguments[0])?arguments[0]:n.i(c.e)(arguments))}function a(t){if(!t)return t;if(t instanceof l)return t;if(t.hasOwnProperty("x")&&t.hasOwnProperty("y")){if(t.hasOwnProperty("radius")||t.hasOwnProperty("r"))return y(t.x,t.y,t.hasOwnProperty("radius")?t.radius:t.r);if((t.hasOwnProperty("radiusX")||t.hasOwnProperty("rx"))&&(t.hasOwnProperty("radiusY")||t.hasOwnProperty("ry")))return s(t.x,t.y,t.hasOwnProperty("radiusX")?t.radiusX:t.rx,t.hasOwnProperty("radiusY")?t.radiusY:t.ry);if(t.hasOwnProperty("w")&&t.hasOwnProperty("h"))return o(t.x,t.y,t.w,t.h);if(t.hasOwnProperty("width")&&t.hasOwnProperty("height"))return o(t.x,t.y,t.width,t.height)}return t.hasOwnProperty("x1")&&t.hasOwnProperty("y1")&&t.hasOwnProperty("x2")&&t.hasOwnProperty("y2")?u(t.x1,t.y1,t.x2,t.y2):Array.isArray(t)&&t.length>0&&t[0].hasOwnProperty("x")&&t[0].hasOwnProperty("y")?x(t):t}var p=n(9),c=n(10),h=n(77);e.a=a;var f=[];f.N=f[0]="n",f.NE=f[1]="ne",f.E=f[2]="e",f.SE=f[3]="se",f.S=f[4]="s",f.SW=f[5]="sw",f.W=f[6]="w",f.NW=f[7]="nw";var l=function(){function t(){}return t.prototype.shift=function(){return"number"==typeof arguments[0]?this.shiftImpl(arguments[0],arguments[1]):Array.isArray(arguments[0])?this.shiftImpl(arguments[0][0],arguments[0][1]):this.shiftImpl(arguments[0].x,arguments[0].y),this},Object.defineProperty(t.prototype,"center",{get:function(){return this.bs().xy},enumerable:!0,configurable:!0}),t.prototype.aabb=function(){throw new Error("not implemented")},t.prototype.corner=function(t){var e=this.aabb();switch(t){case f.N:return i(e.cx,e.y);case f.S:return i(e.cx,e.y2);case f.W:return i(e.x,e.cy);case f.E:return i(e.x2,e.cy);case f.NE:return i(e.x2,e.y);case f.NW:return e.xy;case f.SE:return i(e.x2,e.y2);case f.SW:return i(e.x,e.y2)}return this.center},t.prototype.bs=function(){throw new Error("not implemented")},t.prototype.shiftImpl=function(t,e){throw new Error("Not Implemented")},t.prototype.asIntersectionParams=function(){throw new Error("Not Implemented")},t.prototype.intersects=function(t){return h.b.intersectShapes(this,t)},t}(),d=function(t){function e(e,n,r,i){void 0===e&&(e=0),void 0===n&&(n=0),void 0===r&&(r=0),void 0===i&&(i=0);var o=t.call(this)||this;return o.x=e,o.y=n,o.w=r,o.h=i,o}return p.a(e,t),e.prototype.eq=function(t){return this.x===t.x&&this.y===t.y&&this.w===t.w&&this.h===t.h},e.prototype.toString=function(){return"Rect(x="+this.x+",y="+this.y+",w="+this.w+",h="+this.h+")"},Object.defineProperty(e.prototype,"xy",{get:function(){return r(this.x,this.y)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"x2y2",{get:function(){return r(this.x2,this.y2)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return r(this.w,this.h)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cx",{get:function(){return this.x+this.w/2},set:function(t){this.x=t-this.w/2},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cy",{get:function(){return this.y+this.h/2},set:function(t){this.y=t-this.y/2},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"x2",{get:function(){return this.x+this.w},set:function(t){this.w=t-this.x},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y2",{get:function(){return this.y+this.h},set:function(t){this.h=t-this.y},enumerable:!0,configurable:!0}),e.prototype.shiftImpl=function(t,e){this.x+=t,this.y+=e},e.prototype.aabb=function(){return this},e.prototype.bs=function(){return y(this.cx,this.cy,Math.sqrt(2*this.w+2*this.h))},e.prototype.transform=function(t,e){return o(this.x*t[0],this.y*t[1],this.w*t[0],this.h*t[1])},e.prototype.asIntersectionParams=function(){return{name:"Rectangle",params:[this.xy,this.x2y2]}},e}(l),m=function(t){function e(e,n,r){void 0===e&&(e=0),void 0===n&&(n=0),void 0===r&&(r=0);var i=t.call(this)||this;return i.x=e,i.y=n,i.radius=r,i}return p.a(e,t),Object.defineProperty(e.prototype,"xy",{get:function(){return r(this.x,this.y)},enumerable:!0,configurable:!0}),e.prototype.toString=function(){return"Circle(x="+this.x+",y="+this.y+",radius="+this.radius+")"},e.prototype.shiftImpl=function(t,e){this.x+=t,this.y+=e},e.prototype.aabb=function(){return o(this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius)},e.prototype.bs=function(){return this},e.prototype.transform=function(t,e){return y(this.x*t[0],this.y*t[1],this.radius*(t[0]+t[1])/2)},e.prototype.asIntersectionParams=function(){return{name:"Circle",params:[this.xy,this.radius]}},e}(l),g=function(t){function e(e,n,r,i){void 0===e&&(e=0),void 0===n&&(n=0),void 0===r&&(r=0),void 0===i&&(i=0);var o=t.call(this)||this;return o.x=e,o.y=n,o.radiusX=r,o.radiusY=i,o}return p.a(e,t),Object.defineProperty(e.prototype,"xy",{get:function(){return r(this.x,this.y)},enumerable:!0,configurable:!0}),e.prototype.toString=function(){return"Ellipse(x="+this.x+",y="+this.y+",radiusX="+this.radiusX+NaN+this.radiusY+")"},e.prototype.shiftImpl=function(t,e){this.x+=t,this.y+=e},e.prototype.aabb=function(){return o(this.x-this.radiusX,this.y-this.radiusY,2*this.radiusX,2*this.radiusY)},e.prototype.bs=function(){return y(this.x,this.y,Math.max(this.radiusX,this.radiusY))},e.prototype.transform=function(t,n){return new e(this.x*t[0],this.y*t[1],this.radiusX*t[0],this.radiusX*t[1])},e.prototype.asIntersectionParams=function(){return{name:"Ellipse",params:[this.xy,this.radiusX,this.radiusY]}},e}(l),v=function(t){function e(e,n,r,i){void 0===e&&(e=0),void 0===n&&(n=0),void 0===r&&(r=0),void 0===i&&(i=0);var o=t.call(this)||this;return o.x1=e,o.y1=n,o.x2=r,o.y2=i,o}return p.a(e,t),Object.defineProperty(e.prototype,"xy",{get:function(){return r(this.x1,this.y1)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"x1y1",{get:function(){return this.xy},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"x2y2",{get:function(){return r(this.x2,this.y2)},enumerable:!0,configurable:!0}),e.prototype.toString=function(){return"Line(x1="+this.x1+",y1="+this.y1+",x2="+this.x2+NaN+this.y2+")"},e.prototype.shiftImpl=function(t,e){this.x1+=t,this.y1+=e,this.x2+=t,this.y2+=e},e.prototype.aabb=function(){return o(Math.min(this.x1,this.x2),Math.min(this.y1,this.y2),Math.abs(this.x1-this.x2),Math.abs(this.y1-this.y2))},e.prototype.bs=function(){return y(.5*(this.x1+this.x2),.5*(this.y1+this.y2),Math.max(Math.abs(this.x1-this.x2),Math.abs(this.y1-this.y2))/2)},e.prototype.transform=function(t,n){return new e(this.x1*t[0],this.y1*t[1],this.x2*t[0],this.y2*t[1])},e.prototype.asIntersectionParams=function(){return{name:"Line",params:[this.xy,this.x2y2]}},e}(l),b=function(t){function e(e){void 0===e&&(e=[]);var n=t.call(this)||this;return n.points=e,n}return p.a(e,t),e.prototype.push=function(){2===arguments.length&&"number"==typeof arguments[0]?this.points.push(i(arguments[0],arguments[1])):(t=this.points).push.apply(t,n.i(c.e)(arguments));var t},e.prototype.toString=function(){return"Polygon("+this.points.join(",")+")"},e.prototype.shiftImpl=function(t,e){this.points.forEach(function(n){n.x+=t,n.y+=e})},Object.defineProperty(e.prototype,"length",{get:function(){return this.points.length},enumerable:!0,configurable:!0}),e.prototype.aabb=function(){var t=Number.POSITIVE_INFINITY,e=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY,r=Number.NEGATIVE_INFINITY;return this.points.forEach(function(i){i.x<t&&(t=i.x),i.y<e&&(e=i.y),i.x>n&&(n=i.x),i.y>r&&(r=i.y)}),o(t,e,n-t,r-e)},e.prototype.bs=function(){var t=0,e=0;this.points.forEach(function(n){t+=n.x,e+=n.y}),t/=this.length,e/=this.length;var n=0;return this.points.forEach(function(r){var i=r.x-t,o=r.y-e,y=i*i+o*o;y>n&&(n=y)}),y(t,e,Math.sqrt(n))},e.prototype.transform=function(t,e){return x(this.points.map(function(e){return i(e.x*t[0],e.y*t[1])}))},e.prototype.pointInPolygon=function(t){for(var e,n=this.points.length,r=0,i=this.points[0],o=1;o<=n;o++){var y=this.points[o%n];t.y>Math.min(i.y,y.y)&&t.y<=Math.max(i.y,y.y)&&t.x<=Math.max(i.x,y.x)&&i.y!==y.y&&(e=(t.y-i.y)*(y.x-i.x)/(y.y-i.y)+i.x,(i.x===y.x||t.x<=e)&&r++),i=y}return r%2==1},Object.defineProperty(e.prototype,"area",{get:function(){for(var t=0,e=this.points.length,n=0;n<e;n++){var r=this.points[n],i=this.points[(n+1)%e];t+=r.x*i.y-i.x*r.y}return t/2},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"centroid",{get:function(){for(var t=this.points.length,e=6*this.area,n=0,r=0,o=0;o<t;o++){var y=this.points[o],s=this.points[(o+1)%t],u=y.x*s.y-s.x*y.y;n+=(y.x+s.x)*u,r+=(y.y+s.y)*u}return i(n/e,r/e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isClockwise",{get:function(){return this.area<0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isCounterClockwise",{get:function(){return this.area>0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isConcave",{get:function(){for(var t=0,e=0,n=this.points.length,r=0;r<n;r++){var i=this.points[r],o=this.points[(r+1)%n],y=this.points[(r+2)%n],s=h.a.fromPoints(i,o),u=h.a.fromPoints(o,y);s.cross(u)<0?e++:t++}return 0!==e&&0!==t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isConvex",{get:function(){return!this.isConcave},enumerable:!0,configurable:!0}),e.prototype.asIntersectionParams=function(){return{name:"Polygon",params:[this.points.slice()]}},e}(l)}});